---
title: Playwrightã®æ§‹æ–‡
sidebar:
    label: æ§‹æ–‡
---

## Playwrightã®åŸºæœ¬æ§‹æ–‡ ğŸ§ª
Playwrightã®ãƒ†ã‚¹ãƒˆã¯ã€`@playwright/test`ã¨ã„ã†çµ„ã¿è¾¼ã¿ã®ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ã‚’ä½¿ç”¨ã—ã¦è¨˜è¿°ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ†ã‚¹ãƒˆã®æ§‹é€ åŒ–ã¨ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ãŒç°¡å˜ã«ãªã‚Šã¾ã™ã€‚

### ãƒ†ã‚¹ãƒˆã®ä½œæˆ
ãƒ†ã‚¹ãƒˆã¯**`test`é–¢æ•°ã§å®šç¾©ã—ã€æ¤œè¨¼ã«ã¯`expect`é–¢æ•°**ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚`page`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œï¼ˆãƒšãƒ¼ã‚¸ã®ç§»å‹•ã€ã‚¯ãƒªãƒƒã‚¯ã€å…¥åŠ›ãªã©ï¼‰ã‚’è¡Œã†ãŸã‚ã®ä¸­å¿ƒçš„ãªå½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚

```javascript
const { test, expect } = require('@playwright/test');

test('åŸºæœ¬ãƒ†ã‚¹ãƒˆï¼šãƒšãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’æ¤œè¨¼', async ({ page }) => {
  await page.goto('https://example.com');
  // ãƒšãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’æ¤œè¨¼ã—ã¾ã™
  await expect(page).toHaveTitle(/Example Domain/);
});
```

`expect(page).toHaveTitle()`ã®ã‚ˆã†ã«ã€ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã¯éå¸¸ã«èª­ã¿ã‚„ã™ãè¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

### é«˜åº¦ãªãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª ğŸ¯
Playwrightã¯ã€è¤‡é›‘ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç°¡å˜ã«å†ç¾ã§ãã¾ã™ã€‚

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã®å†ç¾
`page.click()`, `page.fill()`, `page.press()`ã¨ã„ã£ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¯ãƒªãƒƒã‚¯ã€ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã—ã¾ã™ã€‚

```javascript
test('è¤‡é›‘ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³', async ({ page }) => {
  await page.goto('https://playwright.dev/login');
  // ãƒ•ã‚©ãƒ¼ãƒ ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›
  await page.fill('#username', 'testuser');
  await page.fill('#password', 'password123');
  // ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
  await page.click('#login-button');
  
  // ãƒ­ã‚°ã‚¤ãƒ³å¾Œã®ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ¤œè¨¼
  const welcomeMessage = await page.locator('#welcome-message');
  await expect(welcomeMessage).toHaveText('Welcome, testuser!');
});
```

### CI/CDçµ±åˆ ğŸ¤
Playwrightã¯ã€GitHub Actionsãªã©ã®CI/CDãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«ç°¡å˜ã«çµ±åˆã§ãã¾ã™ã€‚CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«ãƒ†ã‚¹ãƒˆã‚’çµ„ã¿è¾¼ã‚€ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ãŒå¤‰æ›´ã•ã‚Œã‚‹ãŸã³ã«è‡ªå‹•ã§ãƒ†ã‚¹ãƒˆãŒå®Ÿè¡Œã•ã‚Œã€ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«ãƒã‚°ã‚’ç™ºè¦‹ã§ãã¾ã™ã€‚

#### GitHub Actionsã®è¨­å®šä¾‹
`.github/workflows/playwright.yml`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®å†…å®¹ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

```yaml
name: Playwright Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
      - name: Install dependencies
        run: npm install
      - name: Install Playwright browsers
        run: npx playwright install --with-deps
      - name: Run Playwright tests
        run: npx playwright test
      - uses: actions/upload-artifact@v4
        if: always()
        with:
          name: playwright-report
          path: playwright-report/
          retention-days: 30
```

ã“ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã¯ã€`push`ã¾ãŸã¯`pull_request`ãŒç™ºç”Ÿã™ã‚‹ãŸã³ã«è‡ªå‹•ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã€ãƒ†ã‚¹ãƒˆçµæœã®ãƒ¬ãƒãƒ¼ãƒˆã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚

### ãƒ‡ãƒãƒƒã‚°ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚° ğŸ
Playwrightã«ã¯ã€ãƒ†ã‚¹ãƒˆã®ãƒ‡ãƒãƒƒã‚°ã‚’åŠ©ã‘ã‚‹å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ãŒçµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã™ã€‚

#### Playwright UI
`npx playwright test --ui`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€GUIã§ãƒ†ã‚¹ãƒˆã‚’ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œã—ãŸã‚Šã€DOMã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’ç¢ºèªã—ãŸã‚Šã§ãã¾ã™ã€‚

#### ã‚³ãƒ¼ãƒ‰ã®ä¸€æ™‚åœæ­¢
`page.pause()`ã‚’ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã«æŒ¿å…¥ã™ã‚‹ã“ã¨ã§ã€ç‰¹å®šã®å ´æ‰€ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã‚’ä¸€æ™‚åœæ­¢ã—ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§è¦ç´ ã®çŠ¶æ…‹ãªã©ã‚’æ‰‹å‹•ã§ç¢ºèªã§ãã¾ã™ã€‚

```javascript
test('ãƒ‡ãƒãƒƒã‚°ãƒ†ã‚¹ãƒˆ', async ({ page }) => {
  await page.goto('https://example.com');
  await page.pause(); // ã“ã“ã§ãƒ†ã‚¹ãƒˆãŒä¸€æ™‚åœæ­¢
  // æ‰‹å‹•ã§æ“ä½œã‚’ç¢ºèªå¾Œã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§resume
});
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– âš¡ï¸
ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œæ™‚é–“ã‚’çŸ­ç¸®ã—ã€åŠ¹ç‡ã‚’å‘ä¸Šã•ã›ã‚‹ãŸã‚ã®æ‰‹æ³•ã§ã™ã€‚

#### ä¸¦åˆ—ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
Playwrightã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä¸¦åˆ—å®Ÿè¡Œã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«`playwright.config.js`ã§`workers`ã®æ•°ã‚’èª¿æ•´ã§ãã¾ã™ã€‚

```javascript
// playwright.config.js
module.exports = {
  // ä¸¦åˆ—å®Ÿè¡Œã™ã‚‹workerã®æ•°ã‚’æŒ‡å®š
  workers: process.env.CI ? 2 : undefined,
};
```

CIç’°å¢ƒã§ã¯`workers`ã®æ•°ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€CIã‚µãƒ¼ãƒãƒ¼ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’æœ€å¤§é™ã«æ´»ç”¨ã§ãã¾ã™ã€‚

#### ãƒ†ã‚¹ãƒˆã®åˆ†é›¢
å„ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¯ç‹¬ç«‹ã—ã¦å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«è¨­è¨ˆã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ä¸¦åˆ—å®Ÿè¡Œã®åŠ¹æœãŒæœ€å¤§åŒ–ã•ã‚Œã¾ã™ã€‚

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ ğŸ”
Playwrightã¯ã€Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆã«ã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã®ãƒ†ã‚¹ãƒˆ
èªè¨¼APIãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹ã€ä¸æ­£ãªèªè¨¼æƒ…å ±ãŒæ‹’å¦ã•ã‚Œã‚‹ã‹ã‚’ãƒ†ã‚¹ãƒˆã—ã¾ã™ã€‚

```javascript
test('ä¸æ­£ãªãƒ­ã‚°ã‚¤ãƒ³', async ({ page }) => {
  await page.goto('https://playwright.dev/login');
  await page.getByLabel('Username').fill('invalid-user');
  await page.getByLabel('Password').fill('wrong-password');
  await page.getByRole('button', { name: 'Log in' }).click();
  
  // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’æ¤œè¨¼
  const errorMessage = page.getByText('Invalid credentials');
  await expect(errorMessage).toBeVisible();
});
```

#### APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®æ¤œè¨¼
`page.route()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã£ã¦ã€ç‰¹å®šã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆã—ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æ¤œè¨¼ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã‚’æ­£ã—ãæ‰±ã£ã¦ã„ã‚‹ã‹ã‚’ãƒ†ã‚¹ãƒˆã§ãã¾ã™ã€‚

```javascript
test('APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®æ¤œè¨¼', async ({ page }) => {
  let interceptedRequest = null;
  
  await page.route('**/api/login', route => {
    interceptedRequest = route.request();
    route.continue();
  });
  
  await page.goto('https://example.com/login');
  await page.getByLabel('Username').fill('testuser');
  await page.getByLabel('Password').fill('password123');
  await page.getByRole('button', { name: 'Log in' }).click();
  
  // ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒæ­£ã—ãé€ä¿¡ã•ã‚ŒãŸã‹æ¤œè¨¼
  expect(interceptedRequest.postData()).toContain('testuser');
});
```

## 7. ãƒ†ã‚¹ãƒˆã®æ§‹é€ åŒ–

### test.describe()ã§ãƒ†ã‚¹ãƒˆã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–

```javascript
import { test, expect } from '@playwright/test';

test.describe('ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½', () => {
  test('æ­£å¸¸ãªãƒ­ã‚°ã‚¤ãƒ³', async ({ page }) => {
    await page.goto('https://example.com/login');
    await page.getByLabel('Username').fill('validuser');
    await page.getByLabel('Password').fill('validpassword');
    await page.getByRole('button', { name: 'Log in' }).click();
    
    await expect(page).toHaveURL(/dashboard/);
  });
  
  test('ä¸æ­£ãªèªè¨¼æƒ…å ±ã§ã®ãƒ­ã‚°ã‚¤ãƒ³', async ({ page }) => {
    await page.goto('https://example.com/login');
    await page.getByLabel('Username').fill('invaliduser');
    await page.getByLabel('Password').fill('wrongpassword');
    await page.getByRole('button', { name: 'Log in' }).click();
    
    await expect(page.getByText('Invalid credentials')).toBeVisible();
  });
});
```

### test.beforeEach()ã¨test.afterEach()

```javascript
test.describe('ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†', () => {
  test.beforeEach(async ({ page }) => {
    // å„ãƒ†ã‚¹ãƒˆã®å‰ã«å®Ÿè¡Œ
    await page.goto('https://example.com');
    await page.getByRole('button', { name: 'Log in' }).click();
    await page.getByLabel('Username').fill('admin');
    await page.getByLabel('Password').fill('admin123');
    await page.getByRole('button', { name: 'Log in' }).click();
  });
  
  test.afterEach(async ({ page }) => {
    // å„ãƒ†ã‚¹ãƒˆã®å¾Œã«å®Ÿè¡Œ
    await page.getByRole('button', { name: 'Log out' }).click();
  });
  
  test('ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ã®è¡¨ç¤º', async ({ page }) => {
    await page.getByRole('link', { name: 'Users' }).click();
    await expect(page.getByText('User List')).toBeVisible();
  });
});
```

## 8. å®Ÿå‹™ã§ã®ãƒ†ã‚¹ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³

### ãƒ‘ã‚¿ãƒ¼ãƒ³1: ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã®ãƒ†ã‚¹ãƒˆ

```javascript
test('ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡ã®ãƒ†ã‚¹ãƒˆ', async ({ page }) => {
  await page.goto('https://example.com/contact');
  
  // ãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›
  await page.getByLabel('Name').fill('John Doe');
  await page.getByLabel('Email').fill('john@example.com');
  await page.getByLabel('Message').fill('Hello, this is a test message.');
  
  // é€ä¿¡
  await page.getByRole('button', { name: 'Submit' }).click();
  
  // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ç¢ºèª
  await expect(page.getByText('Thank you for your message')).toBeVisible();
});
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³2: æ¤œç´¢æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ

```javascript
test('æ¤œç´¢æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ', async ({ page }) => {
  await page.goto('https://example.com');
  
  // æ¤œç´¢ãƒœãƒƒã‚¯ã‚¹ã«å…¥åŠ›
  await page.getByPlaceholder('Search...').fill('Playwright');
  await page.getByRole('button', { name: 'Search' }).click();
  
  // æ¤œç´¢çµæœã®ç¢ºèª
  await expect(page.getByText('Search results')).toBeVisible();
  await expect(page.getByText('Playwright')).toBeVisible();
});
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³3: ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®ãƒ†ã‚¹ãƒˆ

```javascript
test('ãƒ¢ãƒ¼ãƒ€ãƒ«ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®ãƒ†ã‚¹ãƒˆ', async ({ page }) => {
  await page.goto('https://example.com');
  
  // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ã
  await page.getByRole('button', { name: 'Open modal' }).click();
  
  // ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  const modal = page.getByRole('dialog');
  await expect(modal).toBeVisible();
  
  // ãƒ¢ãƒ¼ãƒ€ãƒ«å†…ã®æ“ä½œ
  await modal.getByLabel('Input').fill('Test value');
  await modal.getByRole('button', { name: 'Save' }).click();
  
  // ãƒ¢ãƒ¼ãƒ€ãƒ«ãŒé–‰ã˜ã‚‹ã“ã¨ã‚’ç¢ºèª
  await expect(modal).toBeHidden();
});
```