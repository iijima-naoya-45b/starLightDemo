---
title: Dockerç’°å¢ƒæ§‹ç¯‰å®Œå…¨ã‚¬ã‚¤ãƒ‰
sidebar:
    label: Dockerç’°å¢ƒæ§‹ç¯‰
---

# Dockerç’°å¢ƒæ§‹ç¯‰å®Œå…¨ã‚¬ã‚¤ãƒ‰

Dockerã®ç’°å¢ƒæ§‹ç¯‰ã‹ã‚‰ã€å®Ÿå‹™ã§ä½¿ãˆã‚‹ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¾ã§è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚

## 1. Docker Desktopã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### Windows

```bash
# Docker Desktop for Windowsã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# 1. https://www.docker.com/products/docker-desktop ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
# 2. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã‚’å®Ÿè¡Œ
# 3. WSL 2ã®æœ‰åŠ¹åŒ–ãŒå¿…è¦ãªå ´åˆãŒã‚ã‚‹

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
docker --version
docker compose version  # âœ… V2ï¼ˆãƒã‚¤ãƒ•ãƒ³ãªã—ï¼‰
```

### macOS

```bash
# Docker Desktop for Macã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# 1. https://www.docker.com/products/docker-desktop ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
# 2. .dmgãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã„ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# 3. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰Docker Desktopã‚’èµ·å‹•

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
docker --version
docker compose version  # âœ… V2ï¼ˆãƒã‚¤ãƒ•ãƒ³ãªã—ï¼‰
```

### Linux

**âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …:**

Linuxã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã¯ã€ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚ã¾ãŸã€å…¬å¼ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã¯é »ç¹ã«å¤‰æ›´ã•ã‚Œã¾ã™ã€‚

**âŒ å•é¡Œã®ã‚ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ:**

```bash
# âŒ ã‚³ãƒãƒ³ãƒ‰ã‚’ç¾…åˆ—ã™ã‚‹ã ã‘ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
# Ubuntu/Debianã§ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt-get update
sudo apt-get install -y \
    ca-certificates \
    curl \
    gnupg \
    lsb-release
# ... ä»¥ä¸‹ã€é•·ã„ã‚³ãƒãƒ³ãƒ‰ã®ç¾…åˆ—

# å•é¡Œç‚¹:
# 1. å…¬å¼ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã¯é »ç¹ã«å¤‰ã‚ã‚‹
# 2. ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚„Wikiã«ã“ã‚Œã‚’æ›¸ãã¨ã€åŠå¹´å¾Œã«ã¯ã€Œå‹•ã‹ãªã„ã‚´ãƒŸã€ã«ãªã‚‹
# 3. ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆãŒé«˜ã„
```

**ğŸª“ ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§ã®æŒ‡æ‘˜æ–‡ä¾‹:**

```
ã€æŒ‡æ‘˜ã€‘ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã®ã€Œè³å‘³æœŸé™ã€ã¨ã€Œãƒã‚¤ã‚ºã€ãŒã‚ã‚Šã¾ã™ã€‚
ã€å•é¡Œã€‘Linuxã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ¬ãƒ™ãƒ«ã§ãƒ™ã‚¿æ›¸ãã—ã¦ã„ã¾ã™ãŒã€
       å…¬å¼ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã¯é »ç¹ã«å¤‰ã‚ã‚Šã¾ã™ã€‚
       ãƒ–ãƒ­ã‚°è¨˜äº‹ã‚„Wikiã«ã“ã‚Œã‚’æ›¸ãã¨ã€åŠå¹´å¾Œã«ã¯ã€Œå‹•ã‹ãªã„ã‚´ãƒŸã€ã«ãªã‚Šã¾ã™ã€‚
ã€å½±éŸ¿ã€‘ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆã®å¢—åŠ ã€å¤ã„æƒ…å ±ã«ã‚ˆã‚‹æ··ä¹±
ã€æ¨å¥¨ã€‘ã‚³ãƒãƒ³ãƒ‰ã‚’ç¾…åˆ—ã™ã‚‹ã®ã§ã¯ãªãã€ã€Œå¿…ãšå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆdocs.docker.comï¼‰ã‚’ç¢ºèªã›ã‚ˆã€
       ã¨ä¸€è¡Œæ›¸ãã€ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã”ã¨ã®å·®ç•°ã¯å…¬å¼ã«ä»»ã›ã‚‹ã®ãŒãƒ—ãƒ­ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã™ã€‚
```

**âœ… æ”¹å–„ã•ã‚ŒãŸã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼ˆãƒ—ãƒ­ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰:**

```markdown
## Linuxã§ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

**é‡è¦**: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã¯ã€ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚
ã¾ãŸã€å…¬å¼ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã¯é »ç¹ã«å¤‰æ›´ã•ã‚Œã¾ã™ã€‚

**å¿…ãšå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèªã—ã¦ãã ã•ã„:**
- [Dockerå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ - Linuxã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«](https://docs.docker.com/engine/install/)

### ä¸»è¦ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®å…¬å¼ã‚¬ã‚¤ãƒ‰

- **Ubuntu**: https://docs.docker.com/engine/install/ubuntu/
- **Debian**: https://docs.docker.com/engine/install/debian/
- **CentOS/RHEL**: https://docs.docker.com/engine/install/centos/
- **Fedora**: https://docs.docker.com/engine/install/fedora/

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã®ç¢ºèª

```bash
# Dockerã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
docker --version

# Docker Composeã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèªï¼ˆV2ï¼‰
docker compose version
```

**ç†ç”±**: å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯å¸¸ã«æœ€æ–°ã®æƒ…å ±ã‚’æä¾›ã—ã€ãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã”ã¨ã®å·®ç•°ã‚‚é©åˆ‡ã«å‡¦ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã‚³ãƒãƒ³ãƒ‰ã‚’ãƒ™ã‚¿æ›¸ãã™ã‚‹ã‚ˆã‚Šã‚‚ã€å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¸ã®ãƒªãƒ³ã‚¯ã‚’æä¾›ã™ã‚‹æ–¹ãŒã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆãŒä½ãã€æ­£ç¢ºãªæƒ…å ±ã‚’æä¾›ã§ãã¾ã™ã€‚
```

## 2. Dockerã®åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰

### ã‚¤ãƒ¡ãƒ¼ã‚¸ã®æ“ä½œ

```bash
# ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ä¸€è¦§è¡¨ç¤º
docker images

# ã‚¤ãƒ¡ãƒ¼ã‚¸ã®æ¤œç´¢
docker search nginx

# ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ—ãƒ«
docker pull nginx:latest

# ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰
docker build -t my-app:latest .

# ã‚¤ãƒ¡ãƒ¼ã‚¸ã®å‰Šé™¤
docker rmi my-app:latest

# æœªä½¿ç”¨ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä¸€æ‹¬å‰Šé™¤
docker image prune -a
```

### ã‚³ãƒ³ãƒ†ãƒŠã®æ“ä½œ

```bash
# ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•
docker run -d -p 3000:3000 --name my-app my-app:latest

# ã‚³ãƒ³ãƒ†ãƒŠã®ä¸€è¦§è¡¨ç¤º
docker ps  # å®Ÿè¡Œä¸­
docker ps -a  # ã™ã¹ã¦

# ã‚³ãƒ³ãƒ†ãƒŠã®åœæ­¢
docker stop my-app

# ã‚³ãƒ³ãƒ†ãƒŠã®å†èµ·å‹•
docker restart my-app

# ã‚³ãƒ³ãƒ†ãƒŠã®å‰Šé™¤
docker rm my-app

# å®Ÿè¡Œä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’ä¸€æ‹¬åœæ­¢
docker stop $(docker ps -q)

# åœæ­¢ä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’ä¸€æ‹¬å‰Šé™¤
docker rm $(docker ps -aq)
```

### ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã®ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ

```bash
# ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã‚·ã‚§ãƒ«ã‚’å®Ÿè¡Œ
docker exec -it my-app sh

# ã‚³ãƒ³ãƒ†ãƒŠå†…ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
docker exec my-app npm test

# ã‚³ãƒ³ãƒ†ãƒŠã®ãƒ­ã‚°ã‚’ç¢ºèª
docker logs my-app
docker logs -f my-app  # ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ 
```

## 3. Dockerfileã®ä½œæˆ

### åŸºæœ¬çš„ãªDockerfile

```dockerfile
# ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸
FROM node:18-alpine

# ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®è¨­å®š
WORKDIR /app

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
COPY package*.json ./
RUN npm ci --only=production

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã®ã‚³ãƒ”ãƒ¼
COPY . .

# ãƒãƒ¼ãƒˆã®å…¬é–‹
EXPOSE 3000

# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•
CMD ["npm", "start"]
```

### .dockerignoreã®ä½œæˆ

```plaintext
# .dockerignore
node_modules
npm-debug.log
.git
.gitignore
.env
.env.local
.DS_Store
*.log
coverage
.vscode
.idea
```

## 4. Docker Composeã®è¨­å®š

### åŸºæœ¬çš„ãªdocker-compose.yml

```yaml
# docker-compose.yml
version: '3.8'

services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=development
      - DATABASE_URL=postgresql://postgres:password@db:5432/mydb
    volumes:
      - .:/app
      # âœ… åå‰ä»˜ããƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’ä½¿ç”¨ï¼ˆåŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ ã§ã¯ãªãï¼‰
      - app_node_modules:/app/node_modules
    depends_on:
      - db
    restart: unless-stopped
    networks:
      - app-network
  
  db:
    image: postgres:14-alpine
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: password
      POSTGRES_DB: mydb
    volumes:
      - postgres_data:/var/lib/postgresql/data
    # âœ… DBã®ãƒãƒ¼ãƒˆã¯å…¬é–‹ã—ãªã„ï¼ˆã‚³ãƒ³ãƒ†ãƒŠé–“é€šä¿¡ã®ã¿ï¼‰
    # ports:
    #   - "5432:5432"  # ãƒ‡ãƒãƒƒã‚°æ™‚ã®ã¿å…¬é–‹
    restart: unless-stopped
    networks:
      - app-network

volumes:
  postgres_data:
  app_node_modules:  # âœ… åå‰ä»˜ããƒœãƒªãƒ¥ãƒ¼ãƒ 

networks:
  app-network:
    driver: bridge
```

### Docker Composeã®ã‚³ãƒãƒ³ãƒ‰ï¼ˆV2ï¼‰

```bash
# âœ… ã‚µãƒ¼ãƒ“ã‚¹ã®èµ·å‹•ï¼ˆV2: ãƒã‚¤ãƒ•ãƒ³ãªã—ï¼‰
docker compose up -d

# âœ… ã‚µãƒ¼ãƒ“ã‚¹ã®åœæ­¢ï¼ˆV2ï¼‰
docker compose down

# âœ… ã‚µãƒ¼ãƒ“ã‚¹ã®å†ãƒ“ãƒ«ãƒ‰ï¼ˆV2ï¼‰
docker compose up -d --build

# âœ… ãƒ­ã‚°ã®ç¢ºèªï¼ˆV2ï¼‰
docker compose logs -f

# âœ… ç‰¹å®šã®ã‚µãƒ¼ãƒ“ã‚¹ã®ãƒ­ã‚°ï¼ˆV2ï¼‰
docker compose logs -f app

# âœ… ã‚µãƒ¼ãƒ“ã‚¹ã®çŠ¶æ…‹ç¢ºèªï¼ˆV2ï¼‰
docker compose ps

# âœ… ã‚µãƒ¼ãƒ“ã‚¹ã®å†èµ·å‹•ï¼ˆV2ï¼‰
docker compose restart

# âœ… ã‚µãƒ¼ãƒ“ã‚¹ã®ã‚¹ã‚±ãƒ¼ãƒ«ï¼ˆV2ï¼‰
docker compose up -d --scale app=3
```

## 5. å®Ÿå‹™ã§ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### ãƒ‘ã‚¿ãƒ¼ãƒ³1: ç’°å¢ƒåˆ¥ã®docker-compose.yml

```yaml
# docker-compose.dev.yml
version: '3.8'

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile.dev
    volumes:
      - .:/app
    environment:
      - NODE_ENV=development

# docker-compose.prod.yml
version: '3.8'

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile.prod
    environment:
      - NODE_ENV=production
    restart: always
```

```bash
# ç’°å¢ƒåˆ¥ã®èµ·å‹•
docker-compose -f docker-compose.dev.yml up -d
docker-compose -f docker-compose.prod.yml up -d
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³2: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®è¨­å®š

```yaml
# docker-compose.yml
version: '3.8'

services:
  app:
    build: .
    networks:
      - app-network
  
  db:
    image: postgres:14-alpine
    networks:
      - app-network

networks:
  app-network:
    driver: bridge
```

## 6. ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

### å•é¡Œ1: ãƒãƒ¼ãƒˆãŒæ—¢ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹

**åŸå› :**
- ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒåŒã˜ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹

**è§£æ±ºç­–:**
```bash
# ãƒãƒ¼ãƒˆã®ä½¿ç”¨çŠ¶æ³ã‚’ç¢ºèª
lsof -i :3000  # macOS/Linux
netstat -ano | findstr :3000  # Windows

# åˆ¥ã®ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨
docker run -p 3001:3000 my-app:latest
```

### å•é¡Œ2: ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®ãƒã‚¦ãƒ³ãƒˆãŒå‹•ä½œã—ãªã„

**åŸå› :**
- ãƒ‘ã‚¹ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ãªã„
- æ¨©é™ã®å•é¡Œ

**è§£æ±ºç­–:**
```bash
# çµ¶å¯¾ãƒ‘ã‚¹ã‚’ä½¿ç”¨
docker run -v /absolute/path:/app my-app:latest

# ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®ç¢ºèª
docker volume ls
docker volume inspect volume_name
```

ã“ã‚Œã§ã€Dockerã®ç’°å¢ƒæ§‹ç¯‰ã®åŸºç¤çŸ¥è­˜ã¨å®Ÿå‹™ã§ã®ä½¿ã„æ–¹ã‚’ç†è§£ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚