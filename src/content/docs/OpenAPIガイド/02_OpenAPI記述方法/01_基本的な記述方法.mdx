---
title: "åŸºæœ¬çš„ãªè¨˜è¿°æ–¹æ³•"
label: "åŸºæœ¬çš„ãªè¨˜è¿°æ–¹æ³•"
---

## ğŸ“ åŸºæœ¬çš„ãªè¨˜è¿°æ–¹æ³•

`OpenAPI`ä»•æ§˜ã®åŸºæœ¬çš„ãªè¨˜è¿°æ–¹æ³•ã‚’è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚

### ğŸ“‹ OpenAPIãƒ•ã‚¡ã‚¤ãƒ«ã®æ§‹é€ 

#### ğŸ“¦ æœ€å°é™ã®OpenAPIãƒ•ã‚¡ã‚¤ãƒ«

```yaml
openapi: 3.0.0
info:
  title: My API
  version: 1.0.0
paths: {}
```

### ğŸ“ Infoï¼ˆæƒ…å ±ï¼‰

#### ğŸ“‹ åŸºæœ¬çš„ãªInfo

```yaml
info:
  title: User Management API
  version: 1.0.0
  description: |
    ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã‚’è¡Œã†APIã§ã™ã€‚
    ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆã€å–å¾—ã€æ›´æ–°ã€å‰Šé™¤ãŒå¯èƒ½ã§ã™ã€‚
  termsOfService: https://example.com/terms
  contact:
    name: API Support
    url: https://example.com/support
    email: support@example.com
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
```

### ğŸ–¥ï¸ Serversï¼ˆã‚µãƒ¼ãƒãƒ¼ï¼‰

#### ğŸ“‹ ã‚µãƒ¼ãƒãƒ¼ã®å®šç¾©

```yaml
servers:
  - url: https://api.example.com/v1
    description: æœ¬ç•ªç’°å¢ƒ
  - url: https://staging-api.example.com/v1
    description: ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ
    variables:
      port:
        default: '443'
        enum:
          - '443'
          - '8443'
  - url: http://localhost:3000/v1
    description: é–‹ç™ºç’°å¢ƒ
```

### ğŸŒ Pathsï¼ˆãƒ‘ã‚¹ï¼‰

#### ğŸ“– GETã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```yaml
paths:
  /api/users:
    get:
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§å–å¾—
      description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¸€è¦§ã‚’å–å¾—ã—ã¾ã™
      operationId: getUsers
      tags:
        - Users
      parameters:
        - name: page
          in: query
          description: ãƒšãƒ¼ã‚¸ç•ªå·
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          description: 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•°
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
      responses:
        '200':
          description: æˆåŠŸ
          content:
            application/json:
              schema:
                type: object
                properties:
                  users:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
                  total:
                    type: integer
                  page:
                    type: integer
                  limit:
                    type: integer
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/InternalServerError'
```

#### â• POSTã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```yaml
paths:
  /api/users:
    post:
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
      description: æ–°ã—ã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã¾ã™
      operationId: createUser
      tags:
        - Users
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserRequest'
            example:
              name: "John Doe"
              email: "john@example.com"
              password: "password123"
      responses:
        '201':
          description: ä½œæˆæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/BadRequest'
        '409':
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ—¢ã«å­˜åœ¨ã—ã¾ã™
```

#### ğŸ”„ PUT/PATCHã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```yaml
paths:
  /api/users/{userId}:
    put:
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°ï¼ˆå…¨ç½®æ›ï¼‰
      operationId: updateUser
      tags:
        - Users
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
    patch:
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°ï¼ˆéƒ¨åˆ†æ›´æ–°ï¼‰
      operationId: patchUser
      tags:
        - Users
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchUserRequest'
      responses:
        '200':
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
```

#### ğŸ—‘ï¸ DELETEã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

```yaml
paths:
  /api/users/{userId}:
    delete:
      summary: ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤
      operationId: deleteUser
      tags:
        - Users
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: å‰Šé™¤æˆåŠŸ
        '404':
          description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
```

### ğŸ§© Componentsï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼‰

#### ğŸ“Š Schemasï¼ˆã‚¹ã‚­ãƒ¼ãƒï¼‰

```yaml
components:
  schemas:
    User:
      type: object
      required:
        - id
        - name
        - email
      properties:
        id:
          type: string
          format: uuid
          example: "123e4567-e89b-12d3-a456-426614174000"
        name:
          type: string
          example: "John Doe"
        email:
          type: string
          format: email
          example: "john@example.com"
        createdAt:
          type: string
          format: date-time
          example: "2024-01-01T00:00:00Z"
        updatedAt:
          type: string
          format: date-time
          example: "2024-01-01T00:00:00Z"
    
    CreateUserRequest:
      type: object
      required:
        - name
        - email
        - password
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        email:
          type: string
          format: email
        password:
          type: string
          format: password
          minLength: 8
    
    UpdateUserRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 100
        email:
          type: string
          format: email
```

#### ğŸ“Œ Parametersï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰

```yaml
components:
  parameters:
    PageParam:
      name: page
      in: query
      description: ãƒšãƒ¼ã‚¸ç•ªå·
      schema:
        type: integer
        minimum: 1
        default: 1
    
    LimitParam:
      name: limit
      in: query
      description: 1ãƒšãƒ¼ã‚¸ã‚ãŸã‚Šã®ä»¶æ•°
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 20
    
    UserIdParam:
      name: userId
      in: path
      required: true
      description: ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
      schema:
        type: string
```

#### ğŸ“¤ Responsesï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼‰

```yaml
components:
  responses:
    BadRequest:
      description: ä¸æ­£ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆ
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: "BAD_REQUEST"
            message: "Invalid request parameters"
    
    Unauthorized:
      description: èªè¨¼ãŒå¿…è¦ã§ã™
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: "UNAUTHORIZED"
            message: "Authentication required"
    
    NotFound:
      description: ãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: "NOT_FOUND"
            message: "Resource not found"
    
    InternalServerError:
      description: ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            code: "INTERNAL_SERVER_ERROR"
            message: "An internal server error occurred"
```

#### ğŸ”’ Security Schemesï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ¼ãƒ ï¼‰

```yaml
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWTãƒˆãƒ¼ã‚¯ãƒ³ã«ã‚ˆã‚‹èªè¨¼
    
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: APIã‚­ãƒ¼ã«ã‚ˆã‚‹èªè¨¼
    
    OAuth2:
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: https://example.com/oauth/authorize
          tokenUrl: https://example.com/oauth/token
          scopes:
            read:users: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®èª­ã¿å–ã‚Š
            write:users: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®æ›¸ãè¾¼ã¿
```

### ğŸ”’ Securityï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼‰

#### ğŸ“‹ ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã”ã¨ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

```yaml
paths:
  /api/users:
    get:
      security:
        - BearerAuth: []
        - ApiKeyAuth: []
      # ...
    post:
      security:
        - BearerAuth: [write:users]
      # ...
```

#### ğŸŒ ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

```yaml
security:
  - BearerAuth: []

paths:
  /api/public:
    get:
      security: []  # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ç„¡åŠ¹åŒ–
      # ...
```

### ğŸ¯ ã¾ã¨ã‚

åŸºæœ¬çš„ãªè¨˜è¿°æ–¹æ³•ã®ãƒã‚¤ãƒ³ãƒˆï¼š

- ğŸ“ **Info**: `API`ã®åŸºæœ¬æƒ…å ±
- ğŸ–¥ï¸ **Servers**: ã‚µãƒ¼ãƒãƒ¼ã®å®šç¾©
- ğŸŒ **Paths**: ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å®šç¾©
- ğŸ§© **Components**: å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆSchemasã€Parametersã€Responsesã€Security Schemesï¼‰
- ğŸ”’ **Security**: `ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£`ã®å®šç¾©

é©åˆ‡ãª`OpenAPI`ã®è¨˜è¿°ã«ã‚ˆã‚Šã€æ˜ç¢ºã§ä¿å®ˆã—ã‚„ã™ã„`APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ`ã‚’ä½œæˆã§ãã¾ã™ã€‚

