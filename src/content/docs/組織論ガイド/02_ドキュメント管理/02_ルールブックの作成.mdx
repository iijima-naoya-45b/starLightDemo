---
title: "ルールブックの作成"
label: "ルールブックの作成"
---

## ルールブックの作成

ルールブックは、開発環境のお作法やコーディング規約、プロセスなどをまとめた資料です。

### ルールブックとは

ルールブックは、チーム全体で統一された開発のルールを定義するための資料です。これにより、コードの品質を保ち、開発効率を向上させます。

### ルールブックに含めるべき内容

#### 1. コーディング規約

**含める内容:**
- 命名規則
- コードスタイル
- コメントの書き方
- ファイル構成

**例:**

```markdown
# コーディング規約

## 命名規則

### 変数・関数名
- ローワーキャメルケースを使用
- 意味のある名前を付ける
- 略語は避ける

```typescript
// 良い例
const userName = 'John';
function getUserProfile(userId: string) { }

// 悪い例
const un = 'John';
function getUP(id: string) { }
```

### クラス名
- パスカルケースを使用
- 名詞を使用

```typescript
// 良い例
class UserService { }
class OrderRepository { }

// 悪い例
class userService { }
class OrderRepo { }
```

## コードスタイル

### インデント
- スペース2つを使用（TypeScript/JavaScript）
- スペース2つを使用（Ruby）

### 行の長さ
- 1行は80文字以内を推奨
- 長い場合は適切に改行

### インポート
- アルファベット順にソート
- グループ分け（外部ライブラリ、内部モジュール）

```typescript
// 良い例
import { useState, useEffect } from 'react';
import { useQuery } from '@tanstack/react-query';

import { UserService } from '@/services/UserService';
import { User } from '@/types/User';
```

## コメントの書き方

### 関数のコメント
- JSDoc形式で記述
- パラメータと戻り値を明記

```typescript
/**
 * ユーザー情報を取得する
 * @param userId - ユーザーID
 * @returns ユーザー情報
 */
async function getUser(userId: string): Promise<User> {
  // ...
}
```

### 複雑なロジックのコメント
- なぜその実装をしたかを説明
- 何をしているかではなく、なぜそうしているかを記述
```

#### 2. Git運用ルール

**含める内容:**
- ブランチ戦略
- コミットメッセージのルール
- プルリクエストのルール
- マージのルール

**例:**

```markdown
# Git運用ルール

## ブランチ戦略

### ブランチの種類
- `main`: 本番環境にデプロイされるブランチ
- `develop`: 開発用のブランチ
- `feature/機能名`: 機能追加用のブランチ
- `fix/バグ名`: バグ修正用のブランチ
- `hotfix/緊急修正名`: 緊急修正用のブランチ

### ブランチの命名規則
- 機能追加: `feature/user-authentication`
- バグ修正: `fix/login-error`
- 緊急修正: `hotfix/security-patch`

## コミットメッセージのルール

### フォーマット
```
&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;

&lt;body&gt;

&lt;footer&gt;
```

### タイプ
- `feat`: 新機能の追加
- `fix`: バグ修正
- `docs`: ドキュメントの更新
- `style`: コードスタイルの変更
- `refactor`: リファクタリング
- `test`: テストの追加・修正
- `chore`: ビルドプロセスやツールの変更

### 例
```
feat(auth): ユーザー認証機能を追加

- ログイン機能を実装
- セッション管理を追加
- パスワードリセット機能を追加

Closes #123
```

## プルリクエストのルール

### 作成時のチェックリスト
- [ ] 自己レビューを実施
- [ ] テストを追加・更新
- [ ] ドキュメントを更新
- [ ] 関連するIssueを参照
- [ ] レビュアーを指定

### 説明欄のテンプレート
```markdown
## 変更内容
[変更内容を記載]

## 変更理由
[変更理由を記載]

## 影響範囲
[影響範囲を記載]

## テスト
[テスト内容を記載]

## スクリーンショット
[スクリーンショットを添付]
```

## マージのルール
- 最低2名の承認が必要
- CIが成功していること
- コンフリクトがないこと
- 承認後は24時間以内にマージする
```

#### 3. コードレビューのルール

**含める内容:**
- レビューの目的
- レビューの観点
- レビューコメントの書き方
- レビュー後の対応

**例:**

```markdown
# コードレビューのルール

## レビューの目的
- コードの品質を保つ
- 知識を共有する
- バグを早期に発見する
- チーム全体のコードスタイルを統一する

## レビューの観点

### 機能性
- 要件を満たしているか
- エッジケースに対応しているか
- エラーハンドリングが適切か

### コード品質
- 可読性が高いか
- 保守性が高いか
- パフォーマンスは適切か

### セキュリティ
- セキュリティホールがないか
- 入力値の検証が適切か
- 認証・認可が適切か

### テスト
- テストが適切に書かれているか
- テストカバレッジは十分か

## レビューコメントの書き方

### 良いコメント
- 具体的で建設的
- 理由を説明する
- 改善案を提示する

```
この関数は長すぎるので、複数の関数に分割することを検討してください。
理由: 可読性と保守性が向上します。
```

### 悪いコメント
- 抽象的で非建設的
- 理由が不明確
- 改善案がない

```
このコードは良くない。
```

## レビュー後の対応
- レビューコメントには必ず返信する
- 指摘された内容は必ず修正する
- 修正後は再度レビューを依頼する
- 承認後は24時間以内にマージする
```

#### 4. テストのルール

**含める内容:**
- テストの種類
- テストの書き方
- テストカバレッジの目標
- テストの実行方法

**例:**

```markdown
# テストのルール

## テストの種類

### 単体テスト（Unit Test）
- 関数やクラスの動作を検証
- カバレッジ目標: 80%以上

### 統合テスト（Integration Test）
- 複数のコンポーネントの連携を検証
- 重要な機能は必ず統合テストを書く

### E2Eテスト（End-to-End Test）
- ユーザーの操作フローを検証
- 主要な機能は必ずE2Eテストを書く

## テストの書き方

### テストの構造
```typescript
describe('関数名', () => {
  it('テストケースの説明', () => {
    // Arrange: 準備
    const input = 'test';
    
    // Act: 実行
    const result = functionToTest(input);
    
    // Assert: 検証
    expect(result).toBe('expected');
  });
});
```

### テストの命名規則
- テストケース名は「何をテストするか」を明確に記述
- 日本語でも英語でも可（チームで統一）

## テストカバレッジの目標
- 単体テスト: 80%以上
- 統合テスト: 主要な機能は100%
- E2Eテスト: 主要なフローは100%

## テストの実行方法
```bash
# 単体テスト
npm test

# カバレッジ付きテスト
npm test -- --coverage

# E2Eテスト
npm run test:e2e
```
```

#### 5. デプロイのルール

**含める内容:**
- デプロイのタイミング
- デプロイの手順
- ロールバックの手順
- デプロイ後の確認事項

**例:**

```markdown
# デプロイのルール

## デプロイのタイミング
- 通常のデプロイ: 平日の10:00-17:00
- 緊急デプロイ: 必要に応じて実施（承認が必要）

## デプロイの手順

### 1. デプロイ前の確認
- [ ] すべてのテストが成功している
- [ ] コードレビューが完了している
- [ ] マージが完了している
- [ ] デプロイ計画を共有している

### 2. デプロイの実行
```bash
# ステージング環境へのデプロイ
npm run deploy:staging

# 本番環境へのデプロイ
npm run deploy:production
```

### 3. デプロイ後の確認
- [ ] アプリケーションが正常に起動している
- [ ] 主要な機能が正常に動作している
- [ ] エラーログに異常がない
- [ ] パフォーマンスに問題がない

## ロールバックの手順
```bash
# ロールバックの実行
npm run rollback

# ロールバック後の確認
# デプロイ後の確認と同じ
```
```

### ルールブックの管理方法

#### 1. 更新頻度

- **定期的な更新**: 四半期ごとに見直し
- **変更時の更新**: ルールが変更された際に即座に更新
- **フィードバックの反映**: チームメンバーからのフィードバックを反映

#### 2. 更新の責任者

- **オーナー**: ルールブックの更新を担当する人を明確にする
- **レビュー**: 更新内容をチームでレビューする
- **承認**: 重要な変更は承認プロセスを設ける

#### 3. アクセシビリティ

- **場所**: 誰でもアクセスできる場所に配置
- **検索**: 検索しやすい構造にする
- **ナビゲーション**: 目次やリンクでナビゲーションしやすくする

### まとめ

ルールブックの作成：

- **含めるべき内容**: コーディング規約、Git運用ルール、コードレビューのルール、テストのルール、デプロイのルール
- **管理方法**: 定期的な更新、責任者の明確化、アクセシビリティの確保
- **実践例**: テンプレートを活用して効率的に作成

ルールブックを適切に作成・管理することで、チーム全体のコード品質と開発効率を向上できます。

