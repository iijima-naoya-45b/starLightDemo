---
title: "VS Code環境構築（Mac/Windows）"
label: "VS Code環境構築"
---

## VS CodeでのJava開発環境構築

Visual Studio Code（VS Code）を使用したJava開発環境の構築手順を、Mac版とWindows版それぞれについて詳しく解説します。

### 前提条件

- VS Codeがインストールされていること
- JDKがインストールされていること（Java 17以上推奨）

### Mac版の環境構築

#### ステップ1: JDKのインストールと確認

**Homebrewを使用する場合（推奨）:**

```bash
# OpenJDK 17をインストール
brew install openjdk@17

# または、OpenJDK 21をインストール
brew install openjdk@21

# インストール確認
java -version
javac -version
```

**環境変数の設定:**

```bash
# ~/.zshrc（または~/.bash_profile）に追加
export JAVA_HOME=$(/usr/libexec/java_home -v 17)
export PATH="$JAVA_HOME/bin:$PATH"

# 設定を反映
source ~/.zshrc  # zshを使用している場合
# または
source ~/.bash_profile  # bashを使用している場合

# 確認
echo $JAVA_HOME
```

**手動でJAVA_HOMEを設定する場合:**

```bash
# インストールされているJavaのバージョンを確認
/usr/libexec/java_home -V

# 特定のバージョンをJAVA_HOMEに設定
export JAVA_HOME=$(/usr/libexec/java_home -v 17)
```

#### ステップ2: VS Codeの拡張機能のインストール

VS Codeを起動し、以下の拡張機能をインストールします：

**必須拡張機能:**

1. **Extension Pack for Java**（Microsoft）
   - 拡張機能ID: `vscjava.vscode-java-pack`
   - このパックには以下が含まれます：
     - Language Support for Java by Red Hat
     - Debugger for Java
     - Test Runner for Java
     - Maven for Java
     - Project Manager for Java
     - Visual Studio IntelliCode

**推奨拡張機能:**

2. **Spring Boot Extension Pack**（VMware）
   - 拡張機能ID: `vmware.vscode-spring-boot`
   - Spring Boot開発に特化した機能を提供

3. **Spring Boot Tools**（VMware）
   - 拡張機能ID: `vmware.vscode-spring-boot-dashboard`

4. **Spring Initializr Java Support**（VMware）
   - 拡張機能ID: `vmware.vscode-spring-initializr`

**インストール方法:**

```bash
# コマンドラインからインストール（オプション）
code --install-extension vscjava.vscode-java-pack
code --install-extension vmware.vscode-spring-boot
code --install-extension vmware.vscode-spring-boot-dashboard
code --install-extension vmware.vscode-spring-initializr
```

または、VS Codeの拡張機能タブ（`Cmd + Shift + X`）から検索してインストールします。

#### ステップ3: VS Codeの設定

**settings.jsonの設定:**

VS Codeの設定を開き（`Cmd + ,`）、以下の設定を追加します：

```json
{
  // Java設定
  "java.configuration.updateBuildConfiguration": "automatic",
  "java.compile.nullAnalysis.mode": "automatic",
  "java.configuration.runtimes": [
    {
      "name": "JavaSE-17",
      "path": "/Library/Java/JavaVirtualMachines/openjdk-17.jdk/Contents/Home",
      "default": true
    }
  ],
  
  // フォーマッター設定
  "java.format.settings.url": "https://raw.githubusercontent.com/google/styleguide/gh-pages/eclipse-java-google-style.xml",
  "java.format.settings.profile": "GoogleStyle",
  
  // インポートの自動整理
  "java.completion.importOrder": [
    "java",
    "javax",
    "org",
    "com"
  ],
  
  // Maven設定
  "java.configuration.maven.userSettings": null,
  
  // テスト設定
  "java.test.config": {
    "workingDirectory": "${workspaceFolder}"
  },
  
  // ファイルエクスプローラー設定
  "files.exclude": {
    "**/.classpath": true,
    "**/.project": true,
    "**/.settings": true,
    "**/.factorypath": true
  }
}
```

**JAVA_HOMEの確認:**

VS Codeの統合ターミナルで確認：

```bash
echo $JAVA_HOME
java -version
```

#### ステップ4: プロジェクトの作成と開く

**Spring Initializrを使用（VS Code内から）:**

1. VS Codeのコマンドパレットを開く（`Cmd + Shift + P`）
2. 「Spring Initializr: Create a Maven Project」または「Spring Initializr: Create a Gradle Project」を選択
3. プロジェクトの設定を入力：
   - Spring Bootバージョン: 3.1.0（または最新のLTS）
   - 言語: Java
   - グループID: com.example
   - アーティファクトID: my-app
   - パッケージング: Jar
   - Javaバージョン: 17
   - 依存関係: Spring Web, Spring Data JPA, PostgreSQL Driver
4. プロジェクトの保存場所を選択

**既存のプロジェクトを開く:**

```bash
# ターミナルから
cd /path/to/your/project
code .
```

または、VS Codeの「ファイル」→「フォルダーを開く」からプロジェクトフォルダを選択します。

#### ステップ5: 動作確認

**プロジェクトのビルド:**

VS Codeの統合ターミナル（`` Ctrl + ` ``）で：

```bash
# Mavenプロジェクトの場合
./mvnw clean install

# Gradleプロジェクトの場合
./gradlew build
```

**アプリケーションの実行:**

1. `src/main/java/com/example/myapp/MyAppApplication.java`を開く
2. `main`メソッドの左側にある「実行」ボタンをクリック
3. または、コマンドパレット（`Cmd + Shift + P`）から「Java: Run Java」を選択

**デバッグ:**

1. ブレークポイントを設定（行番号の左側をクリック）
2. `main`メソッドの左側にある「デバッグ」ボタンをクリック
3. または、`F5`キーを押してデバッグを開始

### Windows版の環境構築

#### ステップ1: JDKのインストールと確認

**方法1: Oracle JDKをインストール**

1. [Oracle JDKダウンロードページ](https://www.oracle.com/java/technologies/downloads/)にアクセス
2. Windows版のJDK 17または21をダウンロード
3. インストーラーを実行してインストール
4. インストール先を確認（通常は `C:\Program Files\Java\jdk-17`）

**方法2: OpenJDKをインストール（推奨）**

1. [Adoptium（Eclipse Temurin）](https://adoptium.net/)にアクセス
2. Windows版のJDK 17または21をダウンロード
3. インストーラーを実行してインストール

**環境変数の設定:**

1. 「システムのプロパティ」を開く
   - Windowsキー + R → `sysdm.cpl` → Enter
   - または、「設定」→「システム」→「詳細情報」→「システムの詳細設定」
2. 「環境変数」ボタンをクリック
3. 「システム環境変数」セクションで「新規」をクリック
4. 変数名: `JAVA_HOME`
5. 変数値: JDKのインストールパス（例: `C:\Program Files\Java\jdk-17`）
6. 「OK」をクリック
7. `Path`変数を選択して「編集」をクリック
8. 「新規」をクリックして `%JAVA_HOME%\bin` を追加
9. 「OK」をクリックしてすべてのダイアログを閉じる

**確認（コマンドプロンプトまたはPowerShell）:**

```cmd
java -version
javac -version
echo %JAVA_HOME%
```

```powershell
java -version
javac -version
$env:JAVA_HOME
```

**PowerShellで一時的に設定する場合:**

```powershell
# 現在のセッションのみ有効
$env:JAVA_HOME = "C:\Program Files\Java\jdk-17"
$env:Path = "$env:JAVA_HOME\bin;$env:Path"
```

#### ステップ2: VS Codeの拡張機能のインストール

Mac版と同様に、以下の拡張機能をインストールします：

**必須拡張機能:**

1. **Extension Pack for Java**（Microsoft）
   - 拡張機能ID: `vscjava.vscode-java-pack`

**推奨拡張機能:**

2. **Spring Boot Extension Pack**（VMware）
3. **Spring Boot Tools**（VMware）
4. **Spring Initializr Java Support**（VMware）

**インストール方法:**

```powershell
# PowerShellからインストール（オプション）
code --install-extension vscjava.vscode-java-pack
code --install-extension vmware.vscode-spring-boot
code --install-extension vmware.vscode-spring-boot-dashboard
code --install-extension vmware.vscode-spring-initializr
```

または、VS Codeの拡張機能タブ（`Ctrl + Shift + X`）から検索してインストールします。

#### ステップ3: VS Codeの設定

**settings.jsonの設定:**

VS Codeの設定を開き（`Ctrl + ,`）、以下の設定を追加します：

```json
{
  // Java設定
  "java.configuration.updateBuildConfiguration": "automatic",
  "java.compile.nullAnalysis.mode": "automatic",
  "java.configuration.runtimes": [
    {
      "name": "JavaSE-17",
      "path": "C:\\Program Files\\Java\\jdk-17",
      "default": true
    }
  ],
  
  // フォーマッター設定
  "java.format.settings.url": "https://raw.githubusercontent.com/google/styleguide/gh-pages/eclipse-java-google-style.xml",
  "java.format.settings.profile": "GoogleStyle",
  
  // インポートの自動整理
  "java.completion.importOrder": [
    "java",
    "javax",
    "org",
    "com"
  ],
  
  // Maven設定
  "java.configuration.maven.userSettings": null,
  
  // テスト設定
  "java.test.config": {
    "workingDirectory": "${workspaceFolder}"
  },
  
  // ファイルエクスプローラー設定
  "files.exclude": {
    "**/.classpath": true,
    "**/.project": true,
    "**/.settings": true,
    "**/.factorypath": true
  },
  
  // Windows固有の設定
  "terminal.integrated.defaultProfile.windows": "PowerShell"
}
```

**注意:** `java.configuration.runtimes`の`path`は、実際のJDKのインストールパスに合わせて変更してください。

**JAVA_HOMEの確認:**

VS Codeの統合ターミナル（`Ctrl + ` `）で確認：

```powershell
# PowerShellの場合
$env:JAVA_HOME
java -version
```

```cmd
# コマンドプロンプトの場合
echo %JAVA_HOME%
java -version
```

#### ステップ4: プロジェクトの作成と開く

**Spring Initializrを使用（VS Code内から）:**

1. VS Codeのコマンドパレットを開く（`Ctrl + Shift + P`）
2. 「Spring Initializr: Create a Maven Project」または「Spring Initializr: Create a Gradle Project」を選択
3. プロジェクトの設定を入力（Mac版と同様）
4. プロジェクトの保存場所を選択

**既存のプロジェクトを開く:**

```powershell
# PowerShellから
cd C:\path\to\your\project
code .
```

または、VS Codeの「ファイル」→「フォルダーを開く」からプロジェクトフォルダを選択します。

#### ステップ5: 動作確認

**プロジェクトのビルド:**

VS Codeの統合ターミナル（`Ctrl + ` `）で：

```powershell
# Mavenプロジェクトの場合
.\mvnw.cmd clean install

# Gradleプロジェクトの場合
.\gradlew.bat build
```

**アプリケーションの実行:**

1. `src/main/java/com/example/myapp/MyAppApplication.java`を開く
2. `main`メソッドの左側にある「実行」ボタンをクリック
3. または、コマンドパレット（`Ctrl + Shift + P`）から「Java: Run Java」を選択

**デバッグ:**

1. ブレークポイントを設定（行番号の左側をクリック）
2. `main`メソッドの左側にある「デバッグ」ボタンをクリック
3. または、`F5`キーを押してデバッグを開始

### 共通の設定とトラブルシューティング

#### VS Codeのワークスペース設定

プロジェクトルートに `.vscode/settings.json` を作成して、プロジェクト固有の設定を行います：

```json
{
  "java.configuration.runtimes": [
    {
      "name": "JavaSE-17",
      "path": "/Library/Java/JavaVirtualMachines/openjdk-17.jdk/Contents/Home",
      "default": true
    }
  ],
  "java.project.sourcePaths": ["src/main/java"],
  "java.project.outputPath": "target/classes",
  "java.project.referencedLibraries": [
    "lib/**/*.jar"
  ]
}
```

#### よくある問題と解決策

**問題1: Java拡張機能がJDKを認識しない**

**解決策:**

1. VS Codeのコマンドパレット（`Cmd/Ctrl + Shift + P`）を開く
2. 「Java: Configure Java Runtime」を選択
3. JDKのパスを手動で設定

または、`settings.json`に以下を追加：

```json
{
  "java.home": "/Library/Java/JavaVirtualMachines/openjdk-17.jdk/Contents/Home"  // Mac
  // または
  "java.home": "C:\\Program Files\\Java\\jdk-17"  // Windows
}
```

**問題2: Maven/Gradleプロジェクトが認識されない**

**解決策:**

1. コマンドパレット（`Cmd/Ctrl + Shift + P`）を開く
2. 「Java: Clean Java Language Server Workspace」を実行
3. VS Codeを再起動

**問題3: インポートが自動で解決されない**

**解決策:**

```json
{
  "java.completion.importOrder": [
    "java",
    "javax",
    "org",
    "com"
  ],
  "java.saveActions.organizeImports": true
}
```

**問題4: ビルドエラーが表示されない**

**解決策:**

1. コマンドパレット（`Cmd/Ctrl + Shift + P`）を開く
2. 「Java: Rebuild Projects」を実行

**問題5: デバッグが動作しない**

**解決策:**

1. `.vscode/launch.json`を作成：

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "java",
      "name": "Launch Current File",
      "request": "launch",
      "mainClass": "${file}"
    },
    {
      "type": "java",
      "name": "Launch Spring Boot App",
      "request": "launch",
      "mainClass": "com.example.myapp.MyAppApplication",
      "projectName": "my-app",
      "args": "",
      "envFile": "${workspaceFolder}/.env"
    }
  ]
}
```

### 便利なショートカット

**Mac:**

- `Cmd + Shift + P`: コマンドパレット
- `Cmd + P`: ファイル検索
- `Cmd + Shift + O`: シンボル検索
- `Cmd + .`: クイックフィックス
- `F5`: デバッグ開始
- `F9`: ブレークポイントの切り替え

**Windows:**

- `Ctrl + Shift + P`: コマンドパレット
- `Ctrl + P`: ファイル検索
- `Ctrl + Shift + O`: シンボル検索
- `Ctrl + .`: クイックフィックス
- `F5`: デバッグ開始
- `F9`: ブレークポイントの切り替え

### 推奨ワークフロー

1. **プロジェクトの作成**: Spring Initializrを使用してプロジェクトを作成
2. **拡張機能のインストール**: 必須拡張機能をインストール
3. **設定の確認**: `settings.json`でJava設定を確認
4. **プロジェクトのビルド**: 統合ターミナルでビルドを実行
5. **コードの記述**: 自動補完とリファクタリング機能を活用
6. **デバッグ**: ブレークポイントを設定してデバッグ実行
7. **テスト**: Test Runner拡張機能を使用してテストを実行

### 次のステップ

VS Codeでの環境構築が完了したら、以下のステップに進みます：

1. **プロジェクト構造の理解**: フォルダ構成を確認
2. **基本的なアノテーション**: Spring Bootのアノテーションを学ぶ
3. **REST APIの作成**: コントローラーを作成してAPIエンドポイントを実装
4. **データベース接続**: JPAを使用してデータベースに接続

VS CodeでのJava開発環境が整いました。快適な開発を始めましょう！

