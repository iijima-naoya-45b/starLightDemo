---
title: å‹å®šç¾©
sidebar:
    label: å‹å®šç¾©
---

## TypeScriptã®å‹å®šç¾©ï¼šå®Ÿè·µçš„ãªç†è§£

TypeScriptã®å‹ã‚·ã‚¹ãƒ†ãƒ ã¯ã€å˜ãªã‚‹å‹æ³¨é‡ˆã§ã¯ãªãã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­è¨ˆã¨ä¿å®ˆæ€§ã‚’å‘ä¸Šã•ã›ã‚‹å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã“ã®ç« ã§ã¯ã€å„å‹ã®æœ¬è³ªçš„ãªæ„å‘³ã¨å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã‚’æ·±ãè§£èª¬ã—ã¾ã™ã€‚

### ãªãœå‹å®šç¾©ãŒé‡è¦ãªã®ã‹

#### å‹å®‰å…¨æ€§ã®æœ¬è³ªçš„ãªä¾¡å€¤

**å•é¡Œã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ï¼ˆJavaScriptï¼‰:**

```javascript
// å•é¡Œ: å®Ÿè¡Œæ™‚ã¾ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºè¦‹ã•ã‚Œãªã„
function calculateTotal(items) {
  return items.reduce((sum, item) => sum + item.price, 0);
}

// å®Ÿè¡Œæ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ
calculateTotal([{ price: 100 }, { price: "200" }]); // "100200" ã¨ã„ã†æ–‡å­—åˆ—ãŒè¿”ã•ã‚Œã‚‹
calculateTotal(null); // TypeError: Cannot read property 'reduce' of null
```

**è§£æ±º: TypeScriptã®å‹å®šç¾©**

```typescript
// è§£æ±º: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ã‚¨ãƒ©ãƒ¼ã‚’ç™ºè¦‹
interface CartItem {
  price: number;
  name: string;
}

function calculateTotal(items: CartItem[]): number {
  return items.reduce((sum, item) => sum + item.price, 0);
}

// ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒæ¤œå‡ºã•ã‚Œã‚‹
calculateTotal([{ price: 100 }, { price: "200" }]); // ã‚¨ãƒ©ãƒ¼: priceã¯numberå‹ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹
calculateTotal(null); // ã‚¨ãƒ©ãƒ¼: nullã¯é…åˆ—ã§ã¯ãªã„
```

**å‹å®šç¾©ãŒã‚‚ãŸã‚‰ã™ä¾¡å€¤:**

1. **æ—©æœŸã®ãƒã‚°ç™ºè¦‹**: ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«ã‚¨ãƒ©ãƒ¼ã‚’æ¤œå‡º
2. **è‡ªå·±æ–‡æ›¸åŒ–**: ã‚³ãƒ¼ãƒ‰ãŒå‹æƒ…å ±ã‚’å«ã‚€ãŸã‚ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã—ã¦æ©Ÿèƒ½
3. **IDEæ”¯æ´**: è‡ªå‹•è£œå®Œã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã®å®‰å…¨æ€§
4. **ãƒãƒ¼ãƒ é–‹ç™º**: ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒæ˜ç¢ºã«ãªã‚Šã€ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‘ä¸Š

## 1. ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–å‹ã¨åŸºæœ¬å‹ ğŸ§±

TypeScriptã®å‹å®šç¾©ã®åŸºæœ¬ã¨ãªã‚‹ã‚‚ã®ã§ã™ã€‚å„å‹ã®å®Ÿè·µçš„ãªä½¿ã„æ–¹ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚

### string: æ–‡å­—åˆ—å‹

**åŸºæœ¬çš„ãªä½¿ã„æ–¹:**

```typescript
const name: string = "Alice";
const message: string = `Hello, ${name}!`;
```

**å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:**

```typescript
// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹å®šç¾©
interface ApiResponse {
  status: string;  // "success" | "error"
  message: string;
  data: unknown;
}

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: ãƒªãƒ†ãƒ©ãƒ«å‹ã¨ã®çµ„ã¿åˆã‚ã›
type HttpMethod = "GET" | "POST" | "PUT" | "DELETE";

function makeRequest(method: HttpMethod, url: string) {
  // methodã¯ç‰¹å®šã®æ–‡å­—åˆ—ã®ã¿ã‚’å—ã‘å…¥ã‚Œã‚‹
  fetch(url, { method });
}

makeRequest("GET", "/api/users");  // OK
makeRequest("PATCH", "/api/users");  // ã‚¨ãƒ©ãƒ¼: "PATCH"ã¯è¨±å¯ã•ã‚Œã¦ã„ãªã„
```

### number: æ•°å€¤å‹

**åŸºæœ¬çš„ãªä½¿ã„æ–¹:**

```typescript
const age: number = 30;
const price: number = 99.99;
```

**å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:**

```typescript
// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: é‡‘é¡ã®è¨ˆç®—ï¼ˆç²¾åº¦ãŒé‡è¦ãªå ´åˆï¼‰
// å•é¡Œ: æµ®å‹•å°æ•°ç‚¹æ•°ã®ç²¾åº¦ã‚¨ãƒ©ãƒ¼
const total = 0.1 + 0.2;  // 0.30000000000000004

// è§£æ±º: æ•´æ•°ã¨ã—ã¦æ‰±ã†ï¼ˆã‚»ãƒ³ãƒˆå˜ä½ï¼‰
type Cents = number;  // ã‚»ãƒ³ãƒˆå˜ä½ã®é‡‘é¡

function addCents(a: Cents, b: Cents): Cents {
  return a + b;
}

const totalCents = addCents(10, 20);  // 30ã‚»ãƒ³ãƒˆ

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: ç¯„å›²ã‚’åˆ¶é™ã™ã‚‹å‹
type Percentage = number & { readonly __brand: unique symbol };

function createPercentage(value: number): Percentage {
  if (value < 0 || value > 100) {
    throw new Error("Percentage must be between 0 and 100");
  }
  return value as Percentage;
}

function applyDiscount(price: number, discount: Percentage): number {
  return price * (1 - discount / 100);
}
```

### boolean: çœŸå½å€¤å‹

**åŸºæœ¬çš„ãªä½¿ã„æ–¹:**

```typescript
const isActive: boolean = true;
const isCompleted: boolean = false;
```

**å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:**

```typescript
// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: ãƒ•ãƒ©ã‚°ã®ç®¡ç†
interface User {
  id: number;
  name: string;
  isActive: boolean;
  isEmailVerified: boolean;
}

function canLogin(user: User): boolean {
  return user.isActive && user.isEmailVerified;
}

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: æ¡ä»¶ä»˜ãå‹ã¨ã®çµ„ã¿åˆã‚ã›
type NonNullable<T> = T extends null | undefined ? never : T;

function processValue<T>(value: T): NonNullable<T> {
  if (value === null || value === undefined) {
    throw new Error("Value cannot be null or undefined");
  }
  return value;
}
```

### null ã¨ undefined: ç©ºå€¤ã®è¡¨ç¾

**é‡è¦ãªåŒºåˆ¥:**

```typescript
// null: æ„å›³çš„ã«ç©ºã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã™
let user: User | null = null;  // ã¾ã ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„

// undefined: å€¤ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¤ºã™
let count: number | undefined;  // åˆæœŸåŒ–ã•ã‚Œã¦ã„ãªã„

// å®Ÿè·µçš„ãªä½¿ã„åˆ†ã‘
interface ApiResponse<T> {
  data: T | null;      // APIãŒæ˜ç¤ºçš„ã«nullã‚’è¿”ã™å ´åˆ
  error?: string;      // ã‚¨ãƒ©ãƒ¼ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ï¼ˆundefinedã®å¯èƒ½æ€§ï¼‰
}
```

**å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:**

```typescript
// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒã‚§ãƒ¼ãƒ³ã¨ã®çµ„ã¿åˆã‚ã›
interface User {
  name: string;
  address?: {
    street: string;
    city: string;
  };
}

function getUserCity(user: User): string | undefined {
  return user.address?.city;  // undefinedã®å¯èƒ½æ€§ãŒã‚ã‚‹
}

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: nullåˆä½“æ¼”ç®—å­ã¨ã®çµ„ã¿åˆã‚ã›
function getDisplayName(user: User | null): string {
  return user?.name ?? "Guest";  // nullã¾ãŸã¯undefinedã®å ´åˆã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’ä½¿ç”¨
}
```

### any: å‹ãƒã‚§ãƒƒã‚¯ã®å›é¿ï¼ˆéæ¨å¥¨ï¼‰

**ãªãœanyã‚’é¿ã‘ã‚‹ã¹ãã‹:**

```typescript
// å•é¡Œã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰: anyã®ä½¿ç”¨
function processData(data: any) {
  return data.value + data.count;  // å®Ÿè¡Œæ™‚ã‚¨ãƒ©ãƒ¼ã®å¯èƒ½æ€§
}

processData({ value: "hello", count: 5 });  // "hello5" ã¨ã„ã†äºˆæœŸã—ãªã„çµæœ

// è§£æ±º: é©åˆ‡ãªå‹å®šç¾©
interface Data {
  value: number;
  count: number;
}

function processData(data: Data): number {
  return data.value + data.count;  // å‹å®‰å…¨
}
```

**anyã®ä»£æ›¿æ‰‹æ®µ:**

```typescript
// 1. unknownã‚’ä½¿ç”¨ï¼ˆã‚ˆã‚Šå®‰å…¨ï¼‰
function processUnknown(data: unknown) {
  if (typeof data === 'object' && data !== null && 'value' in data) {
    // å‹ã‚¬ãƒ¼ãƒ‰ã§å®‰å…¨ã«å‡¦ç†
    return (data as { value: number }).value;
  }
  throw new Error("Invalid data");
}

// 2. ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ç”¨
function processGeneric<T extends { value: number }>(data: T): number {
  return data.value;
}
```

### void: æˆ»ã‚Šå€¤ãŒãªã„é–¢æ•°

**åŸºæœ¬çš„ãªä½¿ã„æ–¹:**

```typescript
function logMessage(message: string): void {
  console.log(message);
  // æ˜ç¤ºçš„ãªreturnãŒãªã„
}
```

**å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:**

```typescript
// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
type ClickHandler = (event: MouseEvent) => void;

const handleClick: ClickHandler = (event) => {
  console.log("Clicked", event.clientX, event.clientY);
  // voidå‹ãªã®ã§ã€æˆ»ã‚Šå€¤ã¯ä½¿ç”¨ã•ã‚Œãªã„
};

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: å‰¯ä½œç”¨ã®ã¿ã®é–¢æ•°
function updateLocalStorage(key: string, value: string): void {
  localStorage.setItem(key, value);
  // æˆ»ã‚Šå€¤ã¯ä¸è¦
}
```

## 2. é…åˆ—ã¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ ğŸ“¦

è¤‡æ•°ã®å€¤ã‚’æ‰±ã†ãŸã‚ã®å‹å®šç¾©ã§ã™ã€‚

### é…åˆ—

è¦ç´ ã®å‹ã‚’è§’æ‹¬å¼§ `[]` ã§æŒ‡å®šã—ã¾ã™ã€‚

- `string[]`: æ–‡å­—åˆ—ã®é…åˆ—ã€‚ä¾‹: `['a', 'b', 'c']`
- `number[]`: æ•°å€¤ã®é…åˆ—ã€‚ä¾‹: `[1, 2, 3]`

### ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«å‹ã‚’å®šç¾©ã—ã¾ã™ã€‚

```typescript
type User = {
  id: number;
  name: string;
  isLogin: boolean;
};

const user: User = {
  id: 1,
  name: 'Alice',
  isLogin: true,
};
```

- `?` (ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£): ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã®å¾Œã‚ã«`?`ã‚’ä»˜ã‘ã‚‹ã¨ã€ãã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã‚ã£ã¦ã‚‚ãªãã¦ã‚‚ã‚ˆããªã‚Šã¾ã™ã€‚

```typescript
type OptionalUser = {
  id: number;
  name?: string; // åå‰ã¯ä»»æ„
};
```

## 3. é–¢æ•° ğŸ¤–

é–¢æ•°ã®å¼•æ•°ã¨æˆ»ã‚Šå€¤ã«å‹ã‚’å®šç¾©ã—ã¾ã™ã€‚

- **å¼•æ•°**: å¼•æ•°åã®å¾Œã« `: å‹` ã‚’æŒ‡å®šã—ã¾ã™ã€‚
- **æˆ»ã‚Šå€¤**: å¼•æ•°ãƒªã‚¹ãƒˆã®å¾Œã« `: å‹` ã‚’æŒ‡å®šã—ã¾ã™ã€‚

```typescript
function add(x: number, y: number): number {
  return x + y;
}

const result = add(1, 2); // result ã¯ number å‹
```

## 4. è¤‡åˆå‹ã¨é«˜åº¦ãªå‹ ğŸ§ 

è¤‡æ•°ã®å‹ã‚’çµ„ã¿åˆã‚ã›ãŸã‚Šã€ã‚ˆã‚ŠæŸ”è»Ÿãªå‹ã‚’å®šç¾©ã—ãŸã‚Šã™ã‚‹æ–¹æ³•ã§ã™ã€‚

### ãƒ¦ãƒ‹ã‚ªãƒ³å‹ (`|`)

è¤‡æ•°ã®å‹ã®ã„ãšã‚Œã‹ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚

```typescript
let value: string | number;
value = 'hello'; // OK
value = 123;     // OK
```

### ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³å‹ (`&`)

è¤‡æ•°ã®å‹ã®ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’çµåˆã—ã¾ã™ã€‚

```typescript
type Admin = { role: string };
type Employee = { id: number };

type AdminEmployee = Admin & Employee;

const admin: AdminEmployee = {
  role: 'admin',
  id: 1,
};
```

### å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ (`type`)

æ—¢å­˜ã®å‹ã«æ–°ã—ã„åå‰ã‚’ä»˜ã‘ã¾ã™ã€‚ç¹°ã‚Šè¿”ã—ä½¿ã†è¤‡é›‘ãªå‹ã‚’ç°¡æ½”ã«è¨˜è¿°ã§ãã¾ã™ã€‚

### ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ (`interface`)

ä¸»ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹é€ ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã—ã¾ã™ã€‚å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã¨ä¼¼ã¦ã„ã¾ã™ãŒã€æ‹¡å¼µï¼ˆ`extends`ï¼‰ã‚„å®Ÿè£…ï¼ˆ`implements`ï¼‰ãªã©ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘çš„ãªä½¿ã„æ–¹ãŒã§ãã¾ã™ã€‚

```typescript
// å‹ã‚¨ã‚¤ãƒªã‚¢ã‚¹
type Point = { x: number; y: number };

// ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
interface Shape {
  width: number;
  height: number;
}
```

## 5. ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ (Generics) ğŸ¤–

ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã¯ã€å†åˆ©ç”¨å¯èƒ½ãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹ãŸã‚ã®å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ç‰¹å®šã®å‹ã«ç¸›ã‚‰ã‚Œã‚‹ã“ã¨ãªãã€è¤‡æ•°ã®å‹ã«å¯¾å¿œã§ãã‚‹é–¢æ•°ã‚„ã‚¯ãƒ©ã‚¹ã‚’å®šç¾©ã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚³ãƒ¼ãƒ‰ã®æŸ”è»Ÿæ€§ã¨å‹å®‰å…¨æ€§ã®ä¸¡æ–¹ã‚’é«˜ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### ãªãœã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ãŒå¿…è¦ãªã®ã‹

**å•é¡Œã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ï¼ˆå‹ã®é‡è¤‡ï¼‰:**

```typescript
// å•é¡Œ: åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¤‡æ•°ã®å‹ã§é‡è¤‡å®šç¾©
function getFirstString(items: string[]): string {
  return items[0];
}

function getFirstNumber(items: number[]): number {
  return items[0];
}

function getFirstUser(items: User[]): User {
  return items[0];
}

// è§£æ±º: ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã§1ã¤ã®é–¢æ•°ã«çµ±ä¸€
function getFirst<T>(items: T[]): T {
  return items[0];
}

// ã™ã¹ã¦ã®å‹ã§ä½¿ç”¨å¯èƒ½
const firstString = getFirst<string>(["a", "b", "c"]);
const firstNumber = getFirst<number>([1, 2, 3]);
const firstUser = getFirst<User>([user1, user2]);
```

### å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹å®‰å…¨ãªå‡¦ç†**

```typescript
// ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã§APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å‹å®‰å…¨ã«
interface ApiResponse<T> {
  data: T;
  status: number;
  message: string;
}

async function fetchData<T>(url: string): Promise<ApiResponse<T>> {
  const response = await fetch(url);
  const json = await response.json();
  return json as ApiResponse<T>;
}

// ä½¿ç”¨ä¾‹: å‹ãŒæ¨è«–ã•ã‚Œã‚‹
interface User {
  id: number;
  name: string;
}

const userResponse = await fetchData<User>("/api/users/1");
// userResponse.dataã¯Userå‹ã¨ã—ã¦æ¨è«–ã•ã‚Œã‚‹
console.log(userResponse.data.name);  // å‹å®‰å…¨
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å®Ÿè£…**

```typescript
// ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã§å‹å®‰å…¨ãªã‚¹ãƒˆã‚¢ã‚’å®Ÿè£…
class Store<T> {
  private state: T;
  private listeners: Array<(state: T) => void> = [];

  constructor(initialState: T) {
    this.state = initialState;
  }

  getState(): T {
    return this.state;
  }

  setState(newState: T): void {
    this.state = newState;
    this.listeners.forEach(listener => listener(this.state));
  }

  subscribe(listener: (state: T) => void): () => void {
    this.listeners.push(listener);
    return () => {
      this.listeners = this.listeners.filter(l => l !== listener);
    };
  }
}

// ä½¿ç”¨ä¾‹: å‹ãŒæ¨è«–ã•ã‚Œã‚‹
interface AppState {
  user: User | null;
  theme: "light" | "dark";
}

const store = new Store<AppState>({
  user: null,
  theme: "light"
});

// store.getState()ã¯AppStateå‹ã¨ã—ã¦æ¨è«–ã•ã‚Œã‚‹
const state = store.getState();
console.log(state.user?.name);  // å‹å®‰å…¨
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹3: åˆ¶ç´„ä»˜ãã‚¸ã‚§ãƒãƒªã‚¯ã‚¹**

```typescript
// ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã«åˆ¶ç´„ã‚’è¿½åŠ 
interface HasId {
  id: number;
}

function updateById<T extends HasId>(items: T[], id: number, updates: Partial<T>): T[] {
  return items.map(item => 
    item.id === id ? { ...item, ...updates } : item
  );
}

// ä½¿ç”¨ä¾‹: HasIdã‚’å®Ÿè£…ã—ã¦ã„ã‚‹å‹ã®ã¿ä½¿ç”¨å¯èƒ½
interface Product extends HasId {
  name: string;
  price: number;
}

const products: Product[] = [
  { id: 1, name: "Laptop", price: 1000 },
  { id: 2, name: "Mouse", price: 20 }
];

const updated = updateById(products, 1, { price: 900 });
// updatedã¯Product[]å‹ã¨ã—ã¦æ¨è«–ã•ã‚Œã‚‹
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹4: è¤‡æ•°ã®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**

```typescript
// è¤‡æ•°ã®å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
function mapArray<T, U>(
  array: T[],
  mapper: (item: T, index: number) => U
): U[] {
  return array.map(mapper);
}

// ä½¿ç”¨ä¾‹
const numbers = [1, 2, 3];
const strings = mapArray(numbers, (n) => n.toString());
// stringsã¯string[]å‹ã¨ã—ã¦æ¨è«–ã•ã‚Œã‚‹

const users: User[] = [
  { id: 1, name: "Alice" },
  { id: 2, name: "Bob" }
];
const names = mapArray(users, (user) => user.name);
// namesã¯string[]å‹ã¨ã—ã¦æ¨è«–ã•ã‚Œã‚‹
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹5: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿**

```typescript
// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
interface CacheOptions<T = any> {
  key: string;
  value: T;
  ttl?: number;
}

// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå‹ã‚’ä½¿ç”¨
const cache1: CacheOptions = {
  key: "user",
  value: "anyå‹"
};

// æ˜ç¤ºçš„ã«å‹ã‚’æŒ‡å®š
const cache2: CacheOptions<User> = {
  key: "user",
  value: { id: 1, name: "Alice" }
};
```

## 6. ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹ (Utility Types) ğŸ› ï¸

TypeScriptãŒæ¨™æº–ã§æä¾›ã™ã‚‹ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹ã¯ã€æ—¢å­˜ã®å‹ã‚’å¤‰æ›ã—ã¦æ–°ã—ã„å‹ã‚’ç”Ÿæˆã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚ã“ã‚Œã‚‰ã‚’é©åˆ‡ã«ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€å‹ã®é‡è¤‡ã‚’é¿ã‘ã€ä¿å®ˆæ€§ã®é«˜ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã‘ã¾ã™ã€‚

### Partialå‹: ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã«

**å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:**

```typescript
interface User {
  id: number;
  name: string;
  email: string;
  age: number;
}

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: æ›´æ–°ç”¨ã®å‹ã‚’ä½œæˆ
type UserUpdate = Partial<User>;

function updateUser(id: number, updates: UserUpdate): void {
  // ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãªã®ã§ã€éƒ¨åˆ†çš„ãªæ›´æ–°ãŒå¯èƒ½
  // ...
}

updateUser(1, { name: "Bob" });  // OK: åå‰ã ã‘ã‚’æ›´æ–°
updateUser(1, { age: 30 });      // OK: å¹´é½¢ã ã‘ã‚’æ›´æ–°
updateUser(1, {});                // OK: ç©ºã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚‚å¯èƒ½

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: ãƒ•ã‚©ãƒ¼ãƒ ã®çŠ¶æ…‹ç®¡ç†
type UserFormState = Partial<User>;

const formState: UserFormState = {
  name: "Alice",
  // emailã¨ageã¯ã¾ã å…¥åŠ›ã•ã‚Œã¦ã„ãªã„
};
```

### Requiredå‹: ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å¿…é ˆã«

**å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:**

```typescript
interface Config {
  apiUrl?: string;
  timeout?: number;
  retries?: number;
}

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’é©ç”¨ã—ãŸå¾Œã€ã™ã¹ã¦å¿…é ˆã«ã™ã‚‹
function createConfig(partial: Partial<Config>): Required<Config> {
  return {
    apiUrl: partial.apiUrl ?? "https://api.example.com",
    timeout: partial.timeout ?? 5000,
    retries: partial.retries ?? 3
  };
}

const config = createConfig({ apiUrl: "https://custom.api.com" });
// configã¯ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå¿…é ˆã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹
console.log(config.timeout);  // å‹å®‰å…¨: undefinedã®å¯èƒ½æ€§ãŒãªã„
```

### Readonlyå‹: ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’èª­ã¿å–ã‚Šå°‚ç”¨ã«

**å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:**

```typescript
interface MutableState {
  count: number;
  items: string[];
}

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«ãªçŠ¶æ…‹ã‚’ä½œæˆ
type ImmutableState = Readonly<MutableState>;

function processState(state: ImmutableState): void {
  // state.count = 10;  // ã‚¨ãƒ©ãƒ¼: èª­ã¿å–ã‚Šå°‚ç”¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«å‰²ã‚Šå½“ã¦ã§ããªã„
  // state.items.push("new");  // ã‚¨ãƒ©ãƒ¼: èª­ã¿å–ã‚Šå°‚ç”¨é…åˆ—ã«pushã§ããªã„
}

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: è¨­å®šã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¿è­·
interface AppConfig {
  apiUrl: string;
  features: string[];
}

const config: Readonly<AppConfig> = {
  apiUrl: "https://api.example.com",
  features: ["feature1", "feature2"]
};

// config.apiUrl = "new";  // ã‚¨ãƒ©ãƒ¼: èª­ã¿å–ã‚Šå°‚ç”¨
```

### Pickå‹: ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é¸æŠ

**å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:**

```typescript
interface User {
  id: number;
  name: string;
  email: string;
  password: string;
  age: number;
  createdAt: Date;
}

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: å…¬é–‹ç”¨ã®å‹ã‚’ä½œæˆï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’é™¤å¤–ï¼‰
type PublicUser = Pick<User, 'id' | 'name' | 'email'>;

function getUserPublicInfo(user: User): PublicUser {
  return {
    id: user.id,
    name: user.name,
    email: user.email
    // passwordã¯å«ã¾ã‚Œãªã„
  };
}

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: ãƒ•ã‚©ãƒ¼ãƒ ç”¨ã®å‹ã‚’ä½œæˆ
type UserFormData = Pick<User, 'name' | 'email' | 'age'>;

const formData: UserFormData = {
  name: "Alice",
  email: "alice@example.com",
  age: 30
  // idã‚„passwordã¯ä¸è¦
};
```

### Omitå‹: ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é™¤å¤–

**å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:**

```typescript
// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’é™¤å¤–ã—ãŸå‹ã‚’ä½œæˆ
type UserWithoutPassword = Omit<User, 'password'>;

function sanitizeUser(user: User): UserWithoutPassword {
  const { password, ...rest } = user;
  return rest;
}

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: æ›´æ–°ç”¨ã®å‹ï¼ˆidã¨createdAtã‚’é™¤å¤–ï¼‰
type UserUpdate = Omit<User, 'id' | 'createdAt'>;

function updateUser(id: number, updates: Partial<UserUpdate>): void {
  // idã¨createdAtã¯æ›´æ–°ã§ããªã„
  // ...
}
```

### Recordå‹: ã‚­ãƒ¼ã¨å€¤ã®å‹ã‚’æŒ‡å®šã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹

**å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:**

```typescript
// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: è¾æ›¸å‹ã®ä½œæˆ
type Status = "pending" | "success" | "error";
type StatusMessages = Record<Status, string>;

const messages: StatusMessages = {
  pending: "å‡¦ç†ä¸­...",
  success: "æˆåŠŸã—ã¾ã—ãŸ",
  error: "ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ"
};

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å‹å®šç¾©
type HttpMethod = "GET" | "POST" | "PUT" | "DELETE";
type ApiEndpoints = Record<string, HttpMethod>;

const endpoints: ApiEndpoints = {
  "/api/users": "GET",
  "/api/users": "POST",
  "/api/users/:id": "PUT",
  "/api/users/:id": "DELETE"
};
```

### Excludeå‹ã¨Extractå‹

**å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:**

```typescript
type AllStatus = "pending" | "success" | "error" | "cancelled";

// Exclude: ç‰¹å®šã®å‹ã‚’é™¤å¤–
type ActiveStatus = Exclude<AllStatus, "cancelled">;
// ActiveStatus = "pending" | "success" | "error"

// Extract: ç‰¹å®šã®å‹ã®ã¿ã‚’æŠ½å‡º
type FinalStatus = Extract<AllStatus, "success" | "error">;
// FinalStatus = "success" | "error"

// ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹: çŠ¶æ…‹é·ç§»ã®å‹å®šç¾©
function canTransition(
  from: ActiveStatus,
  to: FinalStatus
): boolean {
  // é·ç§»ãƒ­ã‚¸ãƒƒã‚¯
  return true;
}
```

## 7. å‹æ¨è«– (Type Inference) ã¨å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ (Type Assertion) ğŸ§ 

### å‹æ¨è«–

TypeScriptã¯ã€å¤‰æ•°ã®åˆæœŸå€¤ã‹ã‚‰è‡ªå‹•çš„ã«å‹ã‚’æ¨è«–ã—ã¾ã™ã€‚

```typescript
let message = "Hello"; // string å‹ã¨æ¨è«–ã•ã‚Œã‚‹
let count = 100;      // number å‹ã¨æ¨è«–ã•ã‚Œã‚‹
```

æ˜ç¤ºçš„ãªå‹å®šç¾©ã‚’ã—ãªãã¦ã‚‚ã€å‹å®‰å…¨æ€§ãŒä¿ãŸã‚Œã‚‹ãŸã‚ã€ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®åŠ¹ç‡ãŒå‘ä¸Šã—ã¾ã™ã€‚

### å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³

é–‹ç™ºè€…ãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã‚ˆã‚Šã‚‚å‹ã®æƒ…å ±ã‚’æŒã£ã¦ã„ã‚‹å ´åˆã«ã€`as`ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦å‹ã‚’ä¸Šæ›¸ãã—ã¾ã™ã€‚ãŸã ã—ã€å‹å®‰å…¨æ€§ã‚’æãªã†å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€æ…é‡ã«ä½¿ç”¨ã™ã¹ãã§ã™ã€‚

```typescript
const element = document.getElementById('my-element') as HTMLInputElement;
// ã“ã®æ™‚ç‚¹ã§elementã¯HTMLInputElementå‹ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹
element.value = "newValue";
```

## 8. enumã¨ãƒªãƒ†ãƒ©ãƒ«å‹ ğŸ”–

ã“ã‚Œã‚‰ã®å‹ã¯ã€ç‰¹å®šã®å€¤ã‚’å³å¯†ã«åˆ¶é™ã—ãŸã„å ´åˆã«å½¹ç«‹ã¡ã¾ã™ã€‚

### enum (åˆ—æŒ™å‹)

é–¢é€£ã™ã‚‹å®šæ•°ã‚’ã¾ã¨ã‚ã¦å®šç¾©ã—ã¾ã™ã€‚`enum`ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼ã‚„æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«ã‚’é¿ã‘ã‚‹ã“ã¨ãŒã§ãã€ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚

```typescript
enum Direction {
  Up,
  Down,
  Left,
  Right,
}

const direction = Direction.Up; // directionã¯ `0` ã«ãªã‚‹
```

`enum`ã®ãƒ¡ãƒ³ãƒãƒ¼ã«ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æ•°å€¤ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¾ã™ãŒã€æ–‡å­—åˆ—ã‚’å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

### ãƒªãƒ†ãƒ©ãƒ«å‹

å³å¯†ã«ç‰¹å®šã®æ–‡å­—åˆ—ã€æ•°å€¤ã€ã¾ãŸã¯çœŸå½å€¤ã®ã¿ã‚’å—ã‘å…¥ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```typescript
type Status = "pending" | "success" | "error";

let currentStatus: Status = "pending";
currentStatus = "success"; // OK
currentStatus = "failure"; // ã‚¨ãƒ©ãƒ¼: '"failure"' å‹ã¯ 'Status' å‹ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¾ã›ã‚“ã€‚
```

ã“ã‚Œã¯ã€ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã®ä¸€ç¨®ã§ã€ç‰¹å®šã®æ–‡å­—åˆ—ã®é›†åˆã ã‘ã‚’è¨±å¯ã—ãŸã„å ´åˆã«éå¸¸ã«ä¾¿åˆ©ã§ã™ã€‚

## 9. æ§‹é€ çš„éƒ¨åˆ†å‹ (Structural Subtyping) ğŸ¦¢

TypeScriptã®å‹ã‚·ã‚¹ãƒ†ãƒ ã¯ã€æ§‹é€ çš„éƒ¨åˆ†å‹ã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒç‰¹å®šã®å‹ã¨ã—ã¦èªè­˜ã•ã‚Œã‚‹ãŸã‚ã«ã€ãã®æ§‹é€ ãŒä¸€è‡´ã—ã¦ã„ã‚Œã°ã‚ˆã„ã¨ã„ã†æ¦‚å¿µã§ã™ã€‚

ä¾‹ãˆã°ã€`Point`ã¨ã„ã†ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒã‚ã‚‹ã¨ã—ã¾ã™ã€‚

```typescript
interface Point {
  x: number;
  y: number;
}
```

ãã—ã¦ã€`Vector`ã¨ã„ã†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã‚Šã¾ã™ã€‚

```typescript
const vector = { x: 10, y: 20, z: 30 };
```

`Vector`ã«ã¯`z`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã‚Šã¾ã™ãŒã€`Point`ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒæŒã¤`x`ã¨`y`ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚‚æŒã£ã¦ã„ã‚‹ãŸã‚ã€`Vector`ã¯**`Point`å‹ã¨ã—ã¦æ‰±ãˆã¾ã™**ã€‚

```typescript
function printPoint(p: Point) {
  console.log(p.x, p.y);
}

printPoint(vector); // ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
```

ã“ã®æŸ”è»Ÿãªå‹ãƒã‚§ãƒƒã‚¯ã¯ã€TypeScriptã®å¤§ããªç‰¹å¾´ã§ã‚ã‚Šã€JavaScriptã¨ã®äº’æ›æ€§ã‚’ä¿ã¤ä¸Šã§é‡è¦ãªå½¹å‰²ã‚’æœãŸã—ã¾ã™ã€‚

## 10. unknownã¨å‹ã‚¬ãƒ¼ãƒ‰ ğŸ›¡ï¸

`any`å‹ã¯å‹ãƒã‚§ãƒƒã‚¯ã‚’å®Œå…¨ã«ç„¡åŠ¹ã«ã—ã¾ã™ãŒã€`unknown`å‹ã¯ã‚ˆã‚Šå®‰å…¨ãªä»£æ›¿æ‰‹æ®µã‚’æä¾›ã—ã¾ã™ã€‚

### unknown

`unknown`å‹ã®å¤‰æ•°ã¯ã€å‹ã‚’ç‰¹å®šã—ãªã„é™ã‚Šã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚„æ“ä½œãŒã§ãã¾ã›ã‚“ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å‹å®‰å…¨æ€§ã‚’å¼·åˆ¶ã—ã¾ã™ã€‚

```typescript
let value: unknown;
value = 'hello';

// ã‚¨ãƒ©ãƒ¼: 'value' ã¯ unknown ã§ã™ã€‚
// value.toUpperCase(); 

if (typeof value === 'string') {
  // ã“ã“ã§ã¯ value ã¯ string å‹ã¨ã—ã¦èªè­˜ã•ã‚Œã‚‹
  console.log(value.toUpperCase()); // OK
}
```

### å‹ã‚¬ãƒ¼ãƒ‰

`typeof`ã‚„`instanceof`ã¨ã„ã£ãŸæ¡ä»¶æ–‡ã‚’ä½¿ã£ã¦ã€å®Ÿè¡Œæ™‚ã«å¤‰æ•°ã®å‹ã‚’çµã‚Šè¾¼ã‚€ã“ã¨ã‚’ã€Œå‹ã‚¬ãƒ¼ãƒ‰ã€ã¨å‘¼ã³ã¾ã™ã€‚ã“ã‚Œã¯ã€`unknown`å‹ã‚’å®‰å…¨ã«æ‰±ã†ãŸã‚ã«ä¸å¯æ¬ ã§ã™ã€‚

## 11. æ¡ä»¶å‹ (Conditional Types) ğŸ¤”

æ¡ä»¶å‹ã¯ã€ã‚ã‚‹å‹ãŒåˆ¥ã®å‹ã«å‰²ã‚Šå½“ã¦å¯èƒ½ã§ã‚ã‚‹ã‹ã©ã†ã‹ã«åŸºã¥ã„ã¦ã€ç•°ãªã‚‹å‹ã‚’è¿”ã™ã“ã¨ãŒã§ãã‚‹é«˜åº¦ãªæ©Ÿèƒ½ã§ã™ã€‚ä¸‰é …æ¼”ç®—å­ã«ä¼¼ãŸæ§‹æ–‡ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ç‰¹ã«ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ç”¨ã•ã‚Œã€éå¸¸ã«æŸ”è»Ÿãªå‹ã‚’å®šç¾©ã™ã‚‹éš›ã«å½¹ç«‹ã¡ã¾ã™ã€‚

### ãªãœæ¡ä»¶å‹ãŒå¿…è¦ãªã®ã‹

**å•é¡Œ: å‹ã«å¿œã˜ãŸå‡¦ç†ã®åˆ†å²**

```typescript
// å•é¡Œ: å‹ã«å¿œã˜ã¦ç•°ãªã‚‹å‡¦ç†ãŒå¿…è¦
function processValue(value: string | number) {
  if (typeof value === 'string') {
    return value.toUpperCase();
  } else {
    return value.toFixed(2);
  }
}

// å•é¡Œ: æˆ»ã‚Šå€¤ã®å‹ãŒæ­£ç¢ºã«æ¨è«–ã•ã‚Œãªã„
const result = processValue("hello");  // string | stringå‹ï¼ˆä¸æ­£ç¢ºï¼‰
```

**è§£æ±º: æ¡ä»¶å‹ã§å‹ã‚’æ­£ç¢ºã«æ¨è«–**

```typescript
// è§£æ±º: æ¡ä»¶å‹ã§æˆ»ã‚Šå€¤ã®å‹ã‚’æ­£ç¢ºã«å®šç¾©
type ProcessResult<T> = T extends string ? string : number;

function processValue<T extends string | number>(
  value: T
): ProcessResult<T> {
  if (typeof value === 'string') {
    return value.toUpperCase() as ProcessResult<T>;
  } else {
    return value.toFixed(2) as ProcessResult<T>;
  }
}

const strResult = processValue("hello");  // stringå‹ã¨ã—ã¦æ¨è«–
const numResult = processValue(123);      // numberå‹ã¨ã—ã¦æ¨è«–
```

### å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹ã‚’æ¡ä»¶ä»˜ãã§å®šç¾©**

```typescript
// ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«å¿œã˜ã¦ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹ã‚’å¤‰æ›´
type ApiEndpoint = 
  | { path: "/users"; method: "GET" }
  | { path: "/users/:id"; method: "GET" }
  | { path: "/users"; method: "POST" };

type ApiResponse<T extends ApiEndpoint> = 
  T extends { path: "/users"; method: "GET" }
    ? User[]
    : T extends { path: "/users/:id"; method: "GET" }
    ? User
    : T extends { path: "/users"; method: "POST" }
    ? { id: number }
    : never;

async function apiCall<T extends ApiEndpoint>(
  endpoint: T
): Promise<ApiResponse<T>> {
  // å®Ÿè£…
  return {} as ApiResponse<T>;
}

// å‹ãŒæ­£ç¢ºã«æ¨è«–ã•ã‚Œã‚‹
const users = await apiCall({ path: "/users", method: "GET" });
// usersã¯User[]å‹

const user = await apiCall({ path: "/users/:id", method: "GET" });
// userã¯Userå‹
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: é…åˆ—ã¨éé…åˆ—ã®åŒºåˆ¥**

```typescript
// é…åˆ—ã‹ã©ã†ã‹ã§å‹ã‚’åˆ†å²
type Flatten<T> = T extends (infer U)[] ? U : T;

type StringArray = Flatten<string[]>;  // string
type StringValue = Flatten<string>;     // string

// å®Ÿè·µçš„ãªä½¿ç”¨ä¾‹
function getFirst<T>(value: T | T[]): T {
  return Array.isArray(value) ? value[0] : value;
}

// å‹ãŒæ­£ç¢ºã«æ¨è«–ã•ã‚Œã‚‹
const first = getFirst([1, 2, 3]);  // numberå‹
const single = getFirst(42);        // numberå‹
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹3: é–¢æ•°ã®æˆ»ã‚Šå€¤ã®å‹ã‚’æŠ½å‡º**

```typescript
// é–¢æ•°å‹ã‹ã‚‰æˆ»ã‚Šå€¤ã®å‹ã‚’æŠ½å‡º
type ReturnType<T> = T extends (...args: any[]) => infer R ? R : never;

function getUser(): User {
  return { id: 1, name: "Alice" };
}

type UserReturn = ReturnType<typeof getUser>;  // Userå‹

// å®Ÿè·µçš„ãªä½¿ç”¨ä¾‹: éåŒæœŸé–¢æ•°ã®æˆ»ã‚Šå€¤
type AsyncReturnType<T> = T extends (...args: any[]) => Promise<infer R>
  ? R
  : T extends (...args: any[]) => infer R
  ? R
  : never;

async function fetchUser(): Promise<User> {
  return { id: 1, name: "Alice" };
}

type FetchedUser = AsyncReturnType<typeof fetchUser>;  // Userå‹
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹4: ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®åˆ¤å®š**

```typescript
// ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã‹ã©ã†ã‹ã‚’åˆ¤å®š
type IsOptional<T, K extends keyof T> = 
  {} extends Pick<T, K> ? true : false;

interface User {
  id: number;
  name: string;
  email?: string;
}

type IsEmailOptional = IsOptional<User, "email">;  // true
type IsNameOptional = IsOptional<User, "name">;     // false
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹5: ãƒã‚¹ãƒˆã—ãŸæ¡ä»¶å‹**

```typescript
// è¤‡é›‘ãªæ¡ä»¶å‹ã®çµ„ã¿åˆã‚ã›
type NonNullable<T> = T extends null | undefined ? never : T;

type DeepNonNullable<T> = T extends object
  ? {
      [P in keyof T]: T[P] extends (infer U)[]
        ? DeepNonNullable<U>[]
        : T[P] extends object
        ? DeepNonNullable<T[P]>
        : NonNullable<T[P]>;
    }
  : NonNullable<T>;

interface Config {
  apiUrl: string | null;
  features: Array<{
    name: string | undefined;
    enabled: boolean | null;
  }>;
}

type StrictConfig = DeepNonNullable<Config>;
// ã™ã¹ã¦ã®nullã¨undefinedãŒé™¤å»ã•ã‚ŒãŸå‹
```

ã“ã®æ©Ÿèƒ½ã¯ã€è¤‡é›‘ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®å‹å®šç¾©ã§ã‚ˆãè¦‹ã‚‰ã‚Œã¾ã™ã€‚

## 12. ãƒãƒƒãƒ”ãƒ³ã‚°å‹ (Mapped Types) ğŸ—ºï¸

ãƒãƒƒãƒ”ãƒ³ã‚°å‹ã¯ã€æ—¢å­˜ã®å‹ã«åŸºã¥ã„ã¦æ–°ã—ã„å‹ã‚’ä½œæˆã™ã‚‹éš›ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ãƒ«ãƒ¼ãƒ—å‡¦ç†ã—ã€æ–°ã—ã„å‹ã«å¤‰æ›ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å‹ã®å¤‰æ›ã‚’è‡ªå‹•åŒ–ã—ã€å‹ã®é‡è¤‡ã‚’é¿ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### ãªãœãƒãƒƒãƒ”ãƒ³ã‚°å‹ãŒå¿…è¦ãªã®ã‹

**å•é¡Œ: å‹ã®å¤‰æ›ã®é‡è¤‡**

```typescript
// å•é¡Œ: åŒã˜ã‚ˆã†ãªå‹å®šç¾©ã‚’ç¹°ã‚Šè¿”ã—æ›¸ãå¿…è¦ãŒã‚ã‚‹
interface User {
  id: number;
  name: string;
  email: string;
}

interface ReadonlyUser {
  readonly id: number;
  readonly name: string;
  readonly email: string;
}

interface OptionalUser {
  id?: number;
  name?: string;
  email?: string;
}

// ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå¢—ãˆã‚‹ãŸã³ã«ã€ã™ã¹ã¦ã®å‹ã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
```

**è§£æ±º: ãƒãƒƒãƒ”ãƒ³ã‚°å‹ã§è‡ªå‹•å¤‰æ›**

```typescript
// è§£æ±º: ãƒãƒƒãƒ”ãƒ³ã‚°å‹ã§è‡ªå‹•çš„ã«å¤‰æ›
type ReadonlyUser = {
  readonly [P in keyof User]: User[P];
};

type OptionalUser = {
  [P in keyof User]?: User[P];
};

// UserãŒå¤‰æ›´ã•ã‚Œã¦ã‚‚ã€è‡ªå‹•çš„ã«åæ˜ ã•ã‚Œã‚‹
```

### å®Ÿè·µçš„ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹1: ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’èª­ã¿å–ã‚Šå°‚ç”¨ã«ã™ã‚‹**

```typescript
type User = {
  name: string;
  age: number;
};

// Userã®ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’èª­ã¿å–ã‚Šå°‚ç”¨ã«ã™ã‚‹
type ReadonlyUser = {
  readonly [P in keyof User]: User[P];
};

const user: ReadonlyUser = {
  name: 'Alice',
  age: 30,
};

// ã‚¨ãƒ©ãƒ¼: 'name' ã¯èª­ã¿å–ã‚Šå°‚ç”¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã‚ã‚‹ãŸã‚ã€å‰²ã‚Šå½“ã¦ã§ãã¾ã›ã‚“ã€‚
// user.name = 'Bob';
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹2: ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã«ã™ã‚‹**

```typescript
// Partial<T>ã®å®Ÿè£…
type MyPartial<T> = {
  [P in keyof T]?: T[P];
};

type OptionalUser = MyPartial<User>;

const partialUser: OptionalUser = {
  name: "Alice"
  // ageã¯çœç•¥å¯èƒ½
};
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹3: ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã¿ã‚’å¤‰æ›**

```typescript
// æ–‡å­—åˆ—ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã¿ã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã«ã™ã‚‹
type OptionalStringProps<T> = {
  [P in keyof T]: T[P] extends string ? T[P] | undefined : T[P];
};

interface Config {
  apiUrl: string;
  timeout: number;
  retries: number;
}

type FlexibleConfig = OptionalStringProps<Config>;
// apiUrlã¯string | undefinedã€timeoutã¨retriesã¯numberã®ã¾ã¾
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹4: ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã®å¤‰æ›**

```typescript
// ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åã«ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’è¿½åŠ 
type Prefixed<T, Prefix extends string> = {
  [P in keyof T as `${Prefix}${Capitalize<string & P>}`]: T[P];
};

interface User {
  name: string;
  age: number;
}

type PrefixedUser = Prefixed<User, "user">;
// { userName: string; userAge: number; }
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹5: æ¡ä»¶ä»˜ããƒãƒƒãƒ”ãƒ³ã‚°å‹**

```typescript
// é–¢æ•°å‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã¿ã‚’æŠ½å‡º
type FunctionPropertyNames<T> = {
  [K in keyof T]: T[K] extends Function ? K : never;
}[keyof T];

type FunctionProperties<T> = Pick<T, FunctionPropertyNames<T>>;

interface UserService {
  id: number;
  name: string;
  getName(): string;
  updateName(name: string): void;
}

type UserServiceMethods = FunctionProperties<UserService>;
// { getName: () => string; updateName: (name: string) => void; }
```

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹6: ãƒã‚¹ãƒˆã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å¤‰æ›**

```typescript
// æ·±ã„éšå±¤ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚‚å¤‰æ›
type DeepReadonly<T> = {
  readonly [P in keyof T]: T[P] extends object
    ? T[P] extends Function
      ? T[P]
      : DeepReadonly<T[P]>
    : T[P];
};

interface Config {
  api: {
    url: string;
    timeout: number;
  };
  features: string[];
}

type ReadonlyConfig = DeepReadonly<Config>;
// ã™ã¹ã¦ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒèª­ã¿å–ã‚Šå°‚ç”¨
```

ã“ã®ä¾‹ã§ã¯ã€`Readonly<T>`ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹ã‚’è‡ªä½œã—ã¦ã„ã¾ã™ãŒã€ã“ã®ã‚ˆã†ã«æ—¢å­˜ã®å‹ã‚’å¤‰æ›ã™ã‚‹å‡¦ç†ã‚’ä¸€èˆ¬åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## 13. ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ (Decorators) ğŸ¨

ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯ã€ã‚¯ãƒ©ã‚¹ã‚„ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã€ãƒ¡ã‚½ãƒƒãƒ‰ãªã©ã«ç‰¹åˆ¥ãªå‹•ä½œã‚’ã‚¢ã‚¿ãƒƒãƒã™ã‚‹æ©Ÿèƒ½ã§ã™ã€‚å®Ÿé¨“çš„ãªæ©Ÿèƒ½ã§ã™ãŒã€Angularã‚„NestJSã¨ã„ã£ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§åºƒãä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚

ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯`@`ã‚·ãƒ³ãƒœãƒ«ã‚’ä½¿ã£ã¦é©ç”¨ã•ã‚Œã¾ã™ã€‚

```typescript
function log(target, key, descriptor) {
  const originalMethod = descriptor.value;
  descriptor.value = function(...args: any[]) {
    console.log(`Calling ${key} with`, args);
    return originalMethod.apply(this, args);
  };
  return descriptor;
}

class Calculator {
  @log
  add(x: number, y: number) {
    return x + y;
  }
}
```

ã“ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€`add`ãƒ¡ã‚½ãƒƒãƒ‰ãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ãŸã³ã«ã€è‡ªå‹•çš„ã«å¼•æ•°ãŒãƒ­ã‚°å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚ãƒ‡ã‚³ãƒ¬ãƒ¼ã‚¿ãƒ¼ã¯ã€ãƒ­ã‚®ãƒ³ã‚°ã€èªè¨¼ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†ã¨ã„ã£ãŸæ¨ªæ–­çš„ãªé–¢å¿ƒã‚’ã€ã‚³ãƒ¼ãƒ‰ã‚’æ±šã™ã“ã¨ãªãå®Ÿè£…ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚

ã“ã‚Œã‚‰ã®ãƒˆãƒ”ãƒƒã‚¯ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã§ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯TypeScriptã®å‹ã‚·ã‚¹ãƒ†ãƒ ã«é–¢ã™ã‚‹éå¸¸ã«é«˜åº¦ã§åŒ…æ‹¬çš„ãªãƒªã‚½ãƒ¼ã‚¹ã«ãªã‚Šã¾ã™ã€‚