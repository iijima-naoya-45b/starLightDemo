---
title: "開発ワークフローとCI/CD"
label: "開発ワークフローとCI/CD"
---

## 開発ワークフローとCI/CD 🚀

TypeScriptプロジェクトをチームで効率的に開発し、本番環境に安全にデプロイするためには、**継続的インテグレーション（CI）と継続的デプロイメント（CD）**のワークフローを構築することが重要です。これにより、コードの品質を維持し、リリースプロセスを自動化できます。

### 1. 継続的インテグレーション（CI）

CIは、開発者が書いたコードを共有リポジトリにマージするたびに、自動的にビルドやテストを実行するプロセスです。これにより、バグや統合の問題を早期に発見できます。

#### CIサービスの利用

GitHub Actions、CircleCI、GitLab CI/CDなどのCIサービスは、プロジェクトのリポジトリに設定ファイルを追加するだけで簡単に導入できます。

#### GitHub Actions の例 (`.github/workflows/ci.yml`):

```yaml
name: CI on Push

on:
  push:
    branches: [ main ]

jobs:
  build_and_test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Use Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '18'
      - name: Install dependencies
        run: npm ci
      - name: Run TypeScript checks
        run: npm run type-check
      - name: Run tests
        run: npm run test
```

このワークフローでは、`main`ブランチにコードがプッシュされるたびに、以下のステップが自動的に実行されます。

- **依存関係のインストール**: `npm ci`で依存関係をインストールします。
- **型チェック**: `npm run type-check`（通常は`tsc --noEmit`）で型エラーがないかチェックします。
- **テスト実行**: `npm run test`でテストコードを実行します。

すべてのステップが成功した場合のみ、その変更は安全と見なされ、次のステージに進めます。

### 2. 継続的デプロイメント（CD）

CDは、CIが成功したビルド成果物を、自動的にステージングや本番環境にデプロイするプロセスです。これにより、手動でのデプロイミスをなくし、リリースを迅速に行えます。

#### デプロイの自動化

CIとCDを組み合わせることで、**「コードをプッシュするだけで、本番環境に自動で反映される」**という理想的なワークフローが実現します。

#### 例（GitHub ActionsによるAWS S3へのデプロイ）:

```yaml
name: CD on successful CI

on:
  push:
    branches: [ main ]

jobs:
  deploy_to_s3:
    needs: build_and_test # CIジョブが成功した場合のみ実行
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Deploy to S3
        run: |
          aws s3 sync ./dist s3://your-s3-bucket-name --delete
        env:
          AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
          AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
```

この例では、CIで設定した`build_and_test`ジョブが成功した場合にのみ、`deploy_to_s3`ジョブが実行されます。`aws s3 sync`コマンドを使用して、ビルド成果物（`dist`ディレクトリ）をAmazon S3バケットに同期します。

## まとめ

開発ワークフローにCI/CDを導入することで、開発者はローカル環境での作業に集中でき、バグの早期発見、コード品質の維持、そして迅速かつ安全なデプロイを実現できます。これは、現代のソフトウェア開発において不可欠なプラクティスです。