---
title: "フォルダ構成"
label: "フォルダ構成"
---

## Railsのフォルダ構成

Railsのフォルダ構成は、**MVC（Model-View-Controller）**の原則に基づいており、開発者がファイルを探しやすく、またアプリケーションの役割を理解しやすくなるよう設計されています。

以下は、主要なフォルダとその役割です。

```
.
├── app                # アプリケーションの核となるコードを格納
│   ├── assets         # スタイルシート、JavaScript、画像などの静的ファイル
│   │   ├── config
│   │   ├── images
│   │   ├── javascript
│   │   └── stylesheets
│   ├── channels       # Action Cable（WebSocket）関連のファイルを格納
│   ├── controllers    # ユーザーからのリクエストを処理するコントローラー
│   ├── helpers        # ビューで使用するヘルパーモジュール
│   ├── jobs           # Active Jobによるバックグラウンドジョブ
│   ├── mailers        # メール送信のためのクラス
│   ├── models         # アプリケーションのデータとビジネスロジックを扱うモデル
│   └── views          # ユーザーインターフェース（HTMLなど）を生成するビューテンプレート
├── bin                # 実行可能なスクリプト
│   ├── bundle
│   ├── rails          # Railsコマンドの実行スクリプト
│   └── rake           # Rakeタスクの実行スクリプト
├── config             # アプリケーション全体の設定ファイル
│   ├── environments   # 開発、テスト、本番など、環境ごとの設定
│   ├── initializers   # アプリケーション起動時に実行されるカスタム設定
│   ├── locales        # I18n（国際化）のための翻訳ファイル
│   ├── application.rb # アプリケーション全体のコア設定
│   ├── database.yml   # データベース接続設定
│   └── routes.rb      # URLとコントローラーを結びつけるルーティング定義
├── db                 # データベース関連のファイル
│   ├── migrate        # データベーススキーマを変更するマイグレーションファイル
│   └── seeds.rb       # データベースに初期データを投入するためのファイル
├── lib                # アプリケーション全体で共有される独自のライブラリ
├── log                # アプリケーションのログファイル
├── public             # ウェブサーバーから直接アクセス可能な静的ファイル
├── test               # テストファイル
├── tmp                # 一時ファイル
├── vendor             # 外部から取得したベンダー依存のコード
└── Gemfile            # プロジェクトの依存関係（Gem）を管理
```

### `app`

アプリケーションの核となるコードが置かれるフォルダです。MVCの各コンポーネントがこの中にあります。

- **app/controllers**: リクエストを処理するコントローラーのコードを格納します。
- **app/models**: アプリケーションのデータとビジネスロジックを扱うモデルのコードを格納します。
- **app/views**: ユーザーインターフェース（HTMLやCSSなど）を生成するビューのテンプレートを格納します。
- **app/assets**: スタイルシート（CSS）、JavaScript、画像などのアセットファイルが置かれます。

### `bin`

実行可能なスクリプトが格納されるフォルダです。

- **bin/rails**: Railsコマンドを実行するためのスクリプト。
- **bin/rake**: Rakeタスク（データベースのマイグレーションなど）を実行するためのスクリプト。

### `config`

アプリケーションの設定ファイルが格納されるフォルダです。

- **config/routes.rb**: アプリケーションのルーティング（URLとコントローラーのアクションの紐付け）を定義します。
- **config/database.yml**: データベースの接続設定を定義します。
- **config/environments**: 開発、テスト、本番など、各環境ごとの設定を定義します。

### `db`

データベースに関連するファイルが格納されます。

- **db/migrate**: データベースのスキーマを変更するためのマイグレーションファイルが置かれます。
- **db/schema.rb**: 現在のデータベーススキーマの構造を記録したファイルです。

### `Dockerfile`

アプリケーションをDockerコンテナとして動かすための設定ファイルです。本番環境でのデプロイを想定して作成されます。

### `lib`

アプリケーション全体で共有されるライブラリやモジュールを格納するフォルダです。

### `log`

アプリケーションのログファイルが格納されます。

### `public`

ウェブサーバーから直接アクセス可能な静的ファイル（HTML、画像など）を格納します。

### `test`

アプリケーションのテストファイルが格納されます。

### `vendor`

外部から取得したベンダー依存のコード（サードパーティライブラリなど）を格納するフォルダです。

これらのフォルダは、Railsの「設定より規約」の思想に基づいているため、開発者はファイルを作成する場所を迷うことなく、効率的に開発を進めることができます。

なお、ここからはRails7系以降の解説です。

### 1. HotwireとStimulus

Rails 7以降、Hotwire（HTML Over The Wire）がデフォルトのフロントエンドアプローチとして採用されました。これは、JavaScriptを最小限に抑え、HTMLを通じてサーバーとやり取りすることで、SPA（Single Page Application）のような高速なユーザー体験を実現するものです。

- **app/javascript/controllers**: このディレクトリは、Hotwireの一部であるStimulusのコントローラを格納するために使用されます。Stimulusは、HTMLに直接アクションやターゲットを記述することで、JavaScriptの振る舞いをカプセル化し、再利用可能なコンポーネントを作成できます。

### 2. Propshaftとアセットパイプラインの進化

Rails 7では、従来のSprocketsに代わる新しいアセットマネジメントツールとしてPropshaftが導入されました。Propshaftは、CSSやJavaScriptのトランスパイルやバンドルをよりシンプルかつ高速に行うことを目的としています。

- **app/assets** ディレクトリの役割は変わりませんが、内部的な処理がPropshaftに置き換わることで、ビルドのパフォーマンスが向上します。

### 3. ImportmapとNode.js依存の削減

Rails 7では、Importmapを使用してJavaScriptの依存関係を管理する方法が標準となりました。これにより、開発者は`npm install`を使わずに、ブラウザが直接ESモジュールをロードできるようになります。

- **config/importmap.rb**: このファイルは、各JavaScriptモジュールをURLにマッピングするために使用されます。これにより、フロントエンドの依存関係をNode.jsなしで管理できます。

これらの変更点は、Railsの最新のトレンドを反映しており、特にフロントエンド開発におけるアプローチに大きな影響を与えています。このドキュメントにこれらのトピックを追加することで、Railsの進化を捉えた、より現代的で実践的な内容になります。