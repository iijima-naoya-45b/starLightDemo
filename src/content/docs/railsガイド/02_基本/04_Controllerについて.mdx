---
title: "Controllerとは"
label: "Controllerとは"
---

## 👨‍✈️ RailsにおけるControllerとは？

RailsにおけるControllerは、ウェブアプリケーションの「司令塔」です。ユーザーからのリクエストを最初に受け取り、アプリケーションのModelとViewに適切な指示を出す役割を担います。

### Controllerの役割と流れ 🗺️

Controllerの仕事は、ユーザーの「行動」を理解し、次の「反応」を決定することです。

1. **リクエストの受信**: ユーザーがブラウザで特定のURLにアクセスすると、まずそのリクエストをControllerが受け取ります。
2. **Modelへの指示**: Controllerは、リクエストの内容（例：ユーザー一覧を表示、新しい投稿を作成）に応じて、Modelにデータの取得や保存を指示します。
3. **Viewへの命令**: Modelから受け取ったデータを使って、どのView（HTMLテンプレート）をユーザーに表示するかを決定します。

### Controllerファイルの構成 📁

Controllerのファイルは、`app/controllers`ディレクトリに配置されます。慣例として、クラス名は扱うリソース（例：ユーザー）の複数形に「Controller」を付けたものになります。

- **例**: ユーザーを管理するコントローラーは `app/controllers/users_controller.rb` となります。

### Controllerのアクション 🎬

Controllerクラス内にある各メソッドをアクションと呼びます。各アクションは、特定のユーザーリクエストに対応する独立した処理単位です。

#### ユーザー管理の例 (UsersController)

| アクション | 対応するリクエスト | 役割 |
| --- | --- | --- |
| `index` | GET /users | 全ユーザーを一覧表示します。 |
| `show` | GET /users/:id | 特定のユーザーの詳細を表示します。 |
| `new` | GET /users/new | 新しいユーザー作成フォームを表示します。 |
| `create` | POST /users | フォーム送信を受け、新しいユーザーを保存します。 |
| `edit` | GET /users/:id/edit | 既存ユーザーの編集フォームを表示します。 |
| `update` | PATCH /users/:id | ユーザーの情報を更新します。 |
| `destroy` | DELETE /users/:id | ユーザーを削除します。 |

### paramsとStrong Parameters

- **params**: Controllerの各アクションでは、`params`というハッシュを通じて、URLやフォームから送信されたデータにアクセスできます。
- **Strong Parameters**: ユーザーからの入力を安全に受け取るためのセキュリティ機能です。これにより、悪意のあるデータがデータベースに保存されるのを防ぎます。`user_params` のように、許可された属性のみを明示的に指定します。

## まとめ

RailsのControllerは、ユーザーのリクエストとアプリケーションの内部ロジックを仲介する重要な役割を果たします。これにより、データ操作（Model）と表示（View）の責任が明確に分離され、アプリケーションが整理され、理解しやすくなります。この役割分担こそが、Railsの強力な開発効率を支える基盤なのです。