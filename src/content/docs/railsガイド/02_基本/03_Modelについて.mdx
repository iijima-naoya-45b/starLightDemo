---
title: "Modelとは"
label: "Modelとは"
---

## 💡 RailsにおけるModelとは？

RailsにおけるModelは、Webアプリケーションの「データ」と「頭脳」を司る重要な存在です。データベースのテーブルと直接対話するだけでなく、アプリケーションのビジネスロジックを管理する役割を担っています。

### Active Recordの魔法 ✨

RailsのModelの心臓部にあるのが、Active Recordという強力なORM（オブジェクト関係マッピング）ライブラリです。この「魔法のツール」を使うことで、私たちはSQL文を一切書くことなく、Rubyのオブジェクトとしてデータベースを操作できます。

例えば、`users`というデータベーステーブルがあれば、Railsは自動的に`User`というModelクラスを紐づけてくれます。

```ruby
# Userクラスのインスタンスは
# データベースのusersテーブルの1つの行に対応します
user = User.new(name: "Alice")
user.save # 魔法！データベースに新しい行が追加される
```

### Modelの3つの超能力 🦸

Modelは単なるデータ置き場ではありません。データを扱う上で欠かせない3つの強力な機能を持っています。

#### 1. バリデーション（Validation）✅

Modelは、データをデータベースに保存する前に、それが「有効なデータか？」を厳しくチェックします。これにより、誤ったデータが入り込むのを防ぎ、データの品質を保ちます。

```ruby
class User < ApplicationRecord
  # 名前が空でないか、メールアドレスが一意であるかチェック！
  validates :name, presence: true
  validates :email, uniqueness: true
end
```

#### 2. 関連付け（Association）🔗

複数のModelが互いにどのように関係しているかを定義します。これにより、複雑なデータ間のつながりを簡単に扱えるようになります。

| 関連付け | 意味合い | 具体例 |
| --- | --- | --- |
| `has_many` | 1対多 | ユーザーは多くの投稿を持つ |
| `belongs_to` | 多対1 | 投稿は1人のユーザーに属する |
| `has_one` | 1対1 | ユーザーは1つのプロフィールを持つ |
| `has_and_belongs_to_many` | 多対多 | 投稿は多くのタグを持ち、タグは多くの投稿を持つ |

関連付けを定義しておけば、`user.posts`のように直感的なコードで関連データを取得できます。

#### 3. コールバック（Callback）🔄

データのライフサイクル（作成、更新、削除など）の特定のタイミングで、自動的に実行される処理を定義します。

```ruby
class Post < ApplicationRecord
  # 投稿が保存される前に実行される
  before_save :set_default_title

  private

  def set_default_title
    # タイトルが空なら「Untitled」を設定
    self.title = "Untitled" if self.title.blank?
  end
end
```

### 📂 Modelファイルの場所

Modelのファイルは、`app/models` ディレクトリに配置されます。慣習として、ファイル名はクラス名を単数形（例：`User`クラスなら`user.rb`）にします。

## まとめ

RailsのModelは、単にデータベースとやり取りするだけでなく、データの検証、関連性の管理、そして自動実行されるロジックを担う、まさにアプリケーションの「心臓部」です。Active Recordという強力なツールのおかげで、私たちは複雑なデータベース操作から解放され、より本質的なアプリケーションの機能開発に集中できるのです。