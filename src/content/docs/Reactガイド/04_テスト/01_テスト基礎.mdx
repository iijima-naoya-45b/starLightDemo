---
title: "ãƒ†ã‚¹ãƒˆåŸºç¤"
label: "ãƒ†ã‚¹ãƒˆåŸºç¤"
---

## ãƒ†ã‚¹ãƒˆåŸºç¤

> **ğŸ“š MSWã®è©³ç´°**: APIã®ãƒ¢ãƒƒã‚¯ã«ã¤ã„ã¦ã¯ã€[è¨­è¨ˆã‚¬ã‚¤ãƒ‰ã®MSW](/è¨­è¨ˆã‚¬ã‚¤ãƒ‰/02_APIè¨­è¨ˆ/05_MSW_ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### ãƒ†ã‚¹ãƒˆã®ç›®çš„: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰è¦‹ãŸæŒ™å‹•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹

React Testing Libraryã®å“²å­¦ã¯ã€**ã€Œå®Ÿè£…è©³ç´°ã‚’ãƒ†ã‚¹ãƒˆã›ãšã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰è¦‹ãŸæŒ™å‹•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã€**ã“ã¨ã§ã™ã€‚

#### âŒ æ‚ªã„ä¾‹: å®Ÿè£…è©³ç´°ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹

```tsx
// âŒ å®Ÿè£…è©³ç´°ã«ä¾å­˜ã—ãŸãƒ†ã‚¹ãƒˆ
test('should call setState when button is clicked', () => {
  const { rerender } = render(<Counter />);
  const component = screen.getByTestId('counter');
  
  // å•é¡Œ: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å†…éƒ¨å®Ÿè£…ï¼ˆsetStateï¼‰ã«ä¾å­˜ã—ã¦ã„ã‚‹
  expect(component.state.count).toBe(0);
  fireEvent.click(screen.getByTestId('increment-button'));
  expect(component.state.count).toBe(1);
});
```

**å•é¡Œç‚¹:**
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å†…éƒ¨å®Ÿè£…ï¼ˆstateã€useStateãªã©ï¼‰ã«ä¾å­˜ã—ã¦ã„ã‚‹
- å®Ÿè£…ãŒå¤‰ã‚ã‚‹ã¨ãƒ†ã‚¹ãƒˆãŒå£Šã‚Œã‚‹ï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã«å¼±ã„ï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦–ç‚¹ã¨ã¯ç„¡é–¢ä¿‚

#### âœ… è‰¯ã„ä¾‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰è¦‹ãŸæŒ™å‹•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹

```tsx
// âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰è¦‹ãŸæŒ™å‹•ã‚’ãƒ†ã‚¹ãƒˆ
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import Counter from './Counter';

test('increments counter when user clicks button', async () => {
  const user = userEvent.setup();
  render(<Counter />);
  
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦–ç‚¹: ç”»é¢ä¸Šã«è¡¨ç¤ºã•ã‚Œã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚’ç¢ºèª
  expect(screen.getByText('Count: 0')).toBeInTheDocument();
  
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦–ç‚¹: ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
  const button = screen.getByRole('button', { name: /increment/i });
  await user.click(button);
  
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦–ç‚¹: ç”»é¢ä¸Šã®ãƒ†ã‚­ã‚¹ãƒˆãŒæ›´æ–°ã•ã‚ŒãŸã‹ç¢ºèª
  expect(screen.getByText('Count: 1')).toBeInTheDocument();
});
```

**è‰¯ã„ç‚¹:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è¦–ç‚¹ï¼ˆç”»é¢ä¸Šã«è¡¨ç¤ºã•ã‚Œã‚‹å†…å®¹ï¼‰ã‚’ãƒ†ã‚¹ãƒˆã—ã¦ã„ã‚‹
- å®Ÿè£…ãŒå¤‰ã‚ã£ã¦ã‚‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰è¦‹ãŸæŒ™å‹•ãŒåŒã˜ãªã‚‰ãƒ†ã‚¹ãƒˆã¯é€šã‚‹ï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã«å¼·ã„ï¼‰
- ãƒ†ã‚¹ãƒˆãŒã€Œä½•ã‚’ã™ã‚‹ã¹ãã‹ã€ã‚’æ˜ç¢ºã«è¡¨ç¾ã—ã¦ã„ã‚‹

### ã‚¯ã‚¨ãƒªã®å„ªå…ˆé †ä½ï¼ˆãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆï¼‰

React Testing Libraryã§ã¯ã€è¦ç´ ã‚’å–å¾—ã™ã‚‹éš›ã«**ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã©ã®ã‚ˆã†ã«è¦ç´ ã‚’è¦‹ã¤ã‘ã‚‹ã‹ã€**ã«åŸºã¥ã„ãŸå„ªå…ˆé †ä½ãŒã‚ã‚Šã¾ã™ã€‚

#### å„ªå…ˆé †ä½è¡¨

| å„ªå…ˆé †ä½ | ã‚¯ã‚¨ãƒª | èª¬æ˜ | ä½¿ç”¨ä¾‹ |
|---------|--------|------|--------|
| **1ä½** | `getByRole` | ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªãƒ­ãƒ¼ãƒ«ï¼ˆãƒœã‚¿ãƒ³ã€ãƒªãƒ³ã‚¯ã€å…¥åŠ›æ¬„ãªã©ï¼‰ | `screen.getByRole('button', { name: /submit/i })` |
| **2ä½** | `getByLabelText` | ãƒ•ã‚©ãƒ¼ãƒ ãƒ©ãƒ™ãƒ«ï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã®ãŸã‚ï¼‰ | `screen.getByLabelText(/email/i)` |
| **3ä½** | `getByPlaceholderText` | ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ãƒ†ã‚­ã‚¹ãƒˆ | `screen.getByPlaceholderText(/enter email/i)` |
| **4ä½** | `getByText` | è¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆï¼ˆæœ€ã‚‚ä¸€èˆ¬çš„ï¼‰ | `screen.getByText(/welcome/i)` |
| **5ä½** | `getByDisplayValue` | å…¥åŠ›æ¬„ã®å€¤ | `screen.getByDisplayValue('test@example.com')` |
| **6ä½** | `getByAltText` | ç”»åƒã®ä»£æ›¿ãƒ†ã‚­ã‚¹ãƒˆ | `screen.getByAltText(/profile picture/i)` |
| **7ä½** | `getByTitle` | titleå±æ€§ | `screen.getByTitle(/tooltip/i)` |
| **8ä½** | `getByTestId` | data-testidå±æ€§ï¼ˆæœ€å¾Œã®æ‰‹æ®µï¼‰ | `screen.getByTestId('submit-button')` |

#### ä½¿ç”¨ä¾‹

```tsx
import { render, screen } from '@testing-library/react';
import LoginForm from './LoginForm';

test('user can login', () => {
  render(<LoginForm />);
  
  // âœ… 1ä½: Roleï¼ˆã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã«åŸºã¥ãï¼‰
  const submitButton = screen.getByRole('button', { name: /login/i });
  
  // âœ… 2ä½: LabelTextï¼ˆãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ï¼‰
  const emailInput = screen.getByLabelText(/email/i);
  const passwordInput = screen.getByLabelText(/password/i);
  
  // âœ… 4ä½: Textï¼ˆè¡¨ç¤ºãƒ†ã‚­ã‚¹ãƒˆï¼‰
  expect(screen.getByText(/welcome/i)).toBeInTheDocument();
  
  // âŒ é¿ã‘ã‚‹ã¹ã: TestIdï¼ˆå®Ÿè£…è©³ç´°ã«ä¾å­˜ï¼‰
  // const submitButton = screen.getByTestId('submit-button');
});
```

#### ã‚¯ã‚¨ãƒªã®é¸ã³æ–¹

1. **`getByRole`**: ãƒœã‚¿ãƒ³ã€ãƒªãƒ³ã‚¯ã€å…¥åŠ›æ¬„ã€è¦‹å‡ºã—ãªã©ã€ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªè¦ç´ 
2. **`getByLabelText`**: ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›æ¬„ï¼ˆ`<label>`ã¨`<input>`ã®é–¢é€£ï¼‰
3. **`getByText`**: è¡¨ç¤ºã•ã‚Œã‚‹ãƒ†ã‚­ã‚¹ãƒˆï¼ˆæœ€ã‚‚ä¸€èˆ¬çš„ï¼‰
4. **`getByTestId`**: ä¸Šè¨˜ã§å–å¾—ã§ããªã„å ´åˆã®ã¿ï¼ˆæœ€å¾Œã®æ‰‹æ®µï¼‰

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ: user-event ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

**`@testing-library/user-event`**ã¯ã€`fireEvent`ã‚ˆã‚Šã‚‚å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã™ã‚‹ãŸã‚ã€æ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚

#### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install --save-dev @testing-library/user-event
```

#### fireEvent ã¨ userEvent ã®é•ã„

**fireEvent:**
- DOMã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›´æ¥ç™ºç«ã™ã‚‹
- å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã¨ã¯ç•°ãªã‚‹å ´åˆãŒã‚ã‚‹

**userEvent:**
- å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆã™ã‚‹
- è¤‡æ•°ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’é©åˆ‡ãªé †åºã§ç™ºç«ï¼ˆä¾‹: `click` â†’ `focus` â†’ `blur`ï¼‰
- ã‚ˆã‚Šãƒªã‚¢ãƒ«ãªãƒ†ã‚¹ãƒˆãŒå¯èƒ½

#### ä½¿ç”¨ä¾‹

```tsx
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import LoginForm from './LoginForm';

test('user can type in input fields', async () => {
  const user = userEvent.setup();
  render(<LoginForm />);
  
  const emailInput = screen.getByLabelText(/email/i);
  const passwordInput = screen.getByLabelText(/password/i);
  const submitButton = screen.getByRole('button', { name: /login/i });
  
  // âœ… userEvent: å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
  await user.type(emailInput, 'test@example.com');
  await user.type(passwordInput, 'password123');
  await user.click(submitButton);
  
  // âŒ fireEvent: DOMã‚¤ãƒ™ãƒ³ãƒˆã‚’ç›´æ¥ç™ºç«ï¼ˆéæ¨å¥¨ï¼‰
  // fireEvent.change(emailInput, { target: { value: 'test@example.com' } });
  // fireEvent.click(submitButton);
});
```

#### userEvent ã®ä¸»ãªãƒ¡ã‚½ãƒƒãƒ‰

| ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ | ä½¿ç”¨ä¾‹ |
|---------|------|--------|
| `click` | ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ | `await user.click(button)` |
| `type` | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› | `await user.type(input, 'text')` |
| `clear` | å…¥åŠ›æ¬„ã‚’ã‚¯ãƒªã‚¢ | `await user.clear(input)` |
| `selectOptions` | ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã‚’é¸æŠ | `await user.selectOptions(select, 'option1')` |
| `upload` | ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ | `await user.upload(fileInput, file)` |
| `keyboard` | ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œ | `await user.keyboard('{Enter}')` |

#### éåŒæœŸå‡¦ç†

**é‡è¦**: `userEvent`ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯**ã™ã¹ã¦éåŒæœŸ**ã§ã™ã€‚å¿…ãš`await`ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

```tsx
// âœ… æ­£ã—ã„: await ã‚’ä½¿ç”¨
test('user can submit form', async () => {
  const user = userEvent.setup();
  render(<Form />);
  
  await user.type(screen.getByLabelText(/email/i), 'test@example.com');
  await user.click(screen.getByRole('button', { name: /submit/i }));
  
  await waitFor(() => {
    expect(screen.getByText(/success/i)).toBeInTheDocument();
  });
});

// âŒ é–“é•ã„: await ã‚’å¿˜ã‚Œã¦ã„ã‚‹
test('user can submit form', () => {
  const user = userEvent.setup();
  render(<Form />);
  
  user.type(screen.getByLabelText(/email/i), 'test@example.com'); // await ãŒãªã„
  user.click(screen.getByRole('button', { name: /submit/i })); // await ãŒãªã„
});
```

### éåŒæœŸå‡¦ç†: await findBy... ã®ä½¿ã„åˆ†ã‘

React Testing Libraryã§ã¯ã€éåŒæœŸã§è¡¨ç¤ºã•ã‚Œã‚‹è¦ç´ ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ã€`findBy...`ã‚¯ã‚¨ãƒªã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

#### ã‚¯ã‚¨ãƒªã®ç¨®é¡

| ã‚¯ã‚¨ãƒª | ã‚¿ã‚¤ãƒŸãƒ³ã‚° | ä½¿ç”¨ä¾‹ |
|--------|----------|--------|
| `getBy...` | **åŒæœŸçš„**ï¼ˆå³åº§ã«è¦ç´ ã‚’å–å¾—ï¼‰ | `screen.getByText('Hello')` |
| `queryBy...` | **åŒæœŸçš„**ï¼ˆè¦ç´ ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆ`null`ã‚’è¿”ã™ï¼‰ | `screen.queryByText('Hello')` |
| `findBy...` | **éåŒæœŸçš„**ï¼ˆè¦ç´ ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§å¾…ã¤ï¼‰ | `await screen.findByText('Hello')` |

#### ä½¿ã„åˆ†ã‘

**`getBy...`**: æ—¢ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹è¦ç´ ã‚’å–å¾—

```tsx
test('displays initial content', () => {
  render(<Component />);
  
  // âœ… æ—¢ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹è¦ç´ 
  expect(screen.getByText('Welcome')).toBeInTheDocument();
});
```

**`queryBy...`**: è¦ç´ ãŒå­˜åœ¨ã—ãªã„ã“ã¨ã‚’ç¢ºèª

```tsx
test('hides error message initially', () => {
  render(<Component />);
  
  // âœ… è¦ç´ ãŒå­˜åœ¨ã—ãªã„ã“ã¨ã‚’ç¢ºèª
  expect(screen.queryByText(/error/i)).not.toBeInTheDocument();
});
```

**`findBy...`**: éåŒæœŸã§è¡¨ç¤ºã•ã‚Œã‚‹è¦ç´ ã‚’å–å¾—

```tsx
test('displays data after loading', async () => {
  render(<Component />);
  
  // âœ… éåŒæœŸã§è¡¨ç¤ºã•ã‚Œã‚‹è¦ç´ ï¼ˆAPIãƒ¬ã‚¹ãƒãƒ³ã‚¹å¾Œãªã©ï¼‰
  const data = await screen.findByText(/loaded/i);
  expect(data).toBeInTheDocument();
});
```

#### å®Ÿè·µä¾‹: ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```tsx
import { render, screen, waitFor } from '@testing-library/react';
import UserProfile from './UserProfile';

test('displays user data after loading', async () => {
  render(<UserProfile userId="1" />);
  
  // åˆæœŸçŠ¶æ…‹: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­
  expect(screen.getByText(/loading/i)).toBeInTheDocument();
  
  // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿å¾Œ: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹
  const userName = await screen.findByText(/john doe/i);
  expect(userName).toBeInTheDocument();
  
  // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ¶ˆãˆã‚‹ã“ã¨ã‚’ç¢ºèª
  await waitFor(() => {
    expect(screen.queryByText(/loading/i)).not.toBeInTheDocument();
  });
});
```

#### `waitFor` ã®ä½¿ç”¨

è¤‡æ•°ã®è¦ç´ ãŒéåŒæœŸã§æ›´æ–°ã•ã‚Œã‚‹å ´åˆã€`waitFor`ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```tsx
import { render, screen, waitFor } from '@testing-library/react';

test('updates multiple elements asynchronously', async () => {
  render(<Component />);
  
  await waitFor(() => {
    expect(screen.getByText(/first element/i)).toBeInTheDocument();
    expect(screen.getByText(/second element/i)).toBeInTheDocument();
  });
});
```

### ãƒ¢ãƒƒã‚¯æˆ¦ç•¥: MSW ã«ã‚ˆã‚‹APIã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

**MSWï¼ˆMock Service Workerï¼‰**ã¯ã€Service Workerã‚’ä½¿ç”¨ã—ã¦ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆã—ã€ãƒ¢ãƒƒã‚¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚

> **ğŸ“š MSWã®è©³ç´°**: MSWã®è©³ç´°ãªä½¿ã„æ–¹ã«ã¤ã„ã¦ã¯ã€[è¨­è¨ˆã‚¬ã‚¤ãƒ‰ã®MSW](/è¨­è¨ˆã‚¬ã‚¤ãƒ‰/02_APIè¨­è¨ˆ/05_MSW_ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒ“ã‚¹ãƒ¯ãƒ¼ã‚«ãƒ¼)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

#### ãªãœMSWã‚’ä½¿ã†ã®ã‹

**å¾“æ¥ã®æ–¹æ³•ï¼ˆfetchã®ãƒ¢ãƒƒã‚¯ï¼‰:**
```tsx
// âŒ å•é¡Œ: fetchã‚’ç›´æ¥ãƒ¢ãƒƒã‚¯ï¼ˆå®Ÿè£…è©³ç´°ã«ä¾å­˜ï¼‰
global.fetch = jest.fn(() =>
  Promise.resolve({
    json: () => Promise.resolve({ id: 1, name: 'John' }),
  })
);
```

**å•é¡Œç‚¹:**
- å®Ÿè£…è©³ç´°ï¼ˆfetchï¼‰ã«ä¾å­˜ã—ã¦ã„ã‚‹
- å®Ÿéš›ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨ç•°ãªã‚‹
- ãƒ†ã‚¹ãƒˆãŒå£Šã‚Œã‚„ã™ã„

**MSWã®åˆ©ç‚¹:**
- å®Ÿéš›ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆ
- å®Ÿè£…è©³ç´°ï¼ˆfetchã€axiosãªã©ï¼‰ã«ä¾å­˜ã—ãªã„
- ã‚ˆã‚Šãƒªã‚¢ãƒ«ãªãƒ†ã‚¹ãƒˆãŒå¯èƒ½

#### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

**1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

```bash
npm install --save-dev msw
```

**2. ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®å®šç¾©**

```tsx
// src/mocks/handlers.ts
import { http, HttpResponse } from 'msw';

export const handlers = [
  // GET /api/users/:id
  http.get('https://api.example.com/users/:id', ({ params }) => {
    const { id } = params;
    return HttpResponse.json({
      id: Number(id),
      name: 'John Doe',
      email: 'john@example.com',
    });
  }),

  // GET /api/users
  http.get('https://api.example.com/users', () => {
    return HttpResponse.json([
      { id: 1, name: 'John Doe', email: 'john@example.com' },
      { id: 2, name: 'Jane Smith', email: 'jane@example.com' },
    ]);
  }),

  // POST /api/users
  http.post('https://api.example.com/users', async ({ request }) => {
    const body = await request.json();
    return HttpResponse.json(
      { id: 3, ...body },
      { status: 201 }
    );
  }),
];
```

**3. ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**

```tsx
// src/mocks/server.ts
import { setupServer } from 'msw/node';
import { handlers } from './handlers';

export const server = setupServer(...handlers);
```

**4. ãƒ†ã‚¹ãƒˆè¨­å®š**

```tsx
// src/setupTests.ts
import { server } from './mocks/server';

// ãƒ†ã‚¹ãƒˆé–‹å§‹å‰ã«MSWã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
beforeAll(() => server.listen({ onUnhandledRequest: 'error' }));

// å„ãƒ†ã‚¹ãƒˆå¾Œã«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆ
afterEach(() => server.resetHandlers());

// ãƒ†ã‚¹ãƒˆçµ‚äº†å¾Œã«MSWã‚µãƒ¼ãƒãƒ¼ã‚’åœæ­¢
afterAll(() => server.close());
```

#### ä½¿ç”¨ä¾‹

```tsx
import { render, screen, waitFor } from '@testing-library/react';
import { server } from '@/mocks/server';
import { http, HttpResponse } from 'msw';
import UserList from './UserList';

test('displays user list', async () => {
  render(<UserList />);
  
  // MSWãŒãƒ¢ãƒƒã‚¯ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ã¾ã§å¾…ã¤
  const user1 = await screen.findByText(/john doe/i);
  const user2 = await screen.findByText(/jane smith/i);
  
  expect(user1).toBeInTheDocument();
  expect(user2).toBeInTheDocument();
});

test('handles API error', async () => {
  // ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã§ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ä¸Šæ›¸ã
  server.use(
    http.get('https://api.example.com/users', () => {
      return HttpResponse.json(
        { error: 'Internal Server Error' },
        { status: 500 }
      );
    })
  );
  
  render(<UserList />);
  
  // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
  const errorMessage = await screen.findByText(/error/i);
  expect(errorMessage).toBeInTheDocument();
});
```

#### MSWã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

1. **ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’å†åˆ©ç”¨**: å…±é€šã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’`handlers.ts`ã«å®šç¾©
2. **ãƒ†ã‚¹ãƒˆã”ã¨ã«ãƒªã‚»ãƒƒãƒˆ**: `afterEach`ã§`server.resetHandlers()`ã‚’å‘¼ã³å‡ºã™
3. **ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã‚‚ãƒ†ã‚¹ãƒˆ**: ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆ4xxã€5xxï¼‰ã‚‚ãƒ¢ãƒƒã‚¯
4. **å®Ÿè£…è©³ç´°ã«ä¾å­˜ã—ãªã„**: fetchã€axiosãªã©ã€ã©ã®HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã‚‚å‹•ä½œ

### ã¾ã¨ã‚

React Testing Libraryã§ã®ãƒ†ã‚¹ãƒˆã®è¦ç‚¹ï¼š

1. **ãƒ†ã‚¹ãƒˆã®ç›®çš„**: å®Ÿè£…è©³ç´°ã§ã¯ãªãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰è¦‹ãŸæŒ™å‹•ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹
2. **ã‚¯ã‚¨ãƒªã®å„ªå…ˆé †ä½**: Role > Label > Text ã®é †ã§é¸æŠ
3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ**: `user-event`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ï¼ˆ`fireEvent`ã‚ˆã‚Šæ¨å¥¨ï¼‰
4. **éåŒæœŸå‡¦ç†**: `findBy...`ã§éåŒæœŸè¦ç´ ã‚’å–å¾—ã€`waitFor`ã§è¤‡æ•°è¦ç´ ã®æ›´æ–°ã‚’å¾…ã¤
5. **ãƒ¢ãƒƒã‚¯æˆ¦ç•¥**: MSWã‚’ä½¿ç”¨ã—ã¦APIã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼ˆå®Ÿè£…è©³ç´°ã«ä¾å­˜ã—ãªã„ï¼‰

ã“ã‚Œã‚‰ã®åŸå‰‡ã«å¾“ã†ã“ã¨ã§ã€ä¿å®ˆæ€§ãŒé«˜ãã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã«å¼·ã„ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚
