---
title: リリース前準備
sidebar:
    label: リリース前準備
---

# App審査前のテスト方法とTestFlightガイド

## 概要
iOSアプリをApp Storeに提出する前の重要なテスト段階について整理。TestFlightを活用したベータテストから審査対策まで網羅的にまとめる。

## App審査前のテスト段階

### 1. 内部テスト（開発段階）
- **デバッグビルド**
  - 開発者端末での直接テスト
  - シミュレータでの基本動作確認
  - 各機能の単体テスト
  - メモリリーク、クラッシュの検出

- **アドホック配布**
  - 限定的な実機テスト
  - UDID登録済みデバイスでのテスト
  - 本番環境に近い状態での検証

### 2. TestFlightによるベータテスト

#### TestFlightとは
- Appleが提供する公式ベータテストプラットフォーム
- App Store Connectと連携
- 最大10,000人の外部テスターを招待可能
- 内部テスター（App Store Connect チーム）は25人まで

#### TestFlightの設定手順

1. **App Store Connectでの準備**
   - アプリ登録とBundle IDの設定
   - 証明書・プロビジョニングプロファイルの準備
   - アプリ情報の基本設定（名前、説明、カテゴリ等）

2. **ビルドのアップロード**
   ```bash
   # Xcodeでのアーカイブ
   # Product → Archive → Distribute App → App Store Connect
   
   # またはコマンドラインツール使用
   xcodebuild -workspace YourApp.xcworkspace \
              -scheme YourApp \
              -archivePath YourApp.xcarchive \
              archive
   ```

3. **TestFlightでのビルド管理**
   - アップロードされたビルドの自動レビュー待ち
   - 処理完了後、テスターへの配布可能
   - ビルド番号は毎回増加させる必要あり

#### テスターの管理

**内部テスター**
- App Store Connectのチームメンバー
- 即座にテスト開始可能
- 管理者、開発者、App Manager、マーケターの役割に応じて招待

**外部テスター**
- メールアドレスでの招待
- Appleの審査が必要（初回のみ、通常24時間以内）
- グループ機能でテスター管理
- 公開リンクでの一般募集も可能

### 3. 審査前チェックリスト

#### 技術的要件
- [ ] 全ての対象デバイスでの動作確認
- [ ] 各iOSバージョンでの互換性テスト
- [ ] ネットワーク接続状況の変化への対応
- [ ] バックグラウンド・フォアグラウンド切り替え
- [ ] メモリ不足時の適切なハンドリング
- [ ] 権限要求の適切な実装（カメラ、位置情報等）

#### App Store審査ガイドライン準拠
- [ ] プライバシーポリシーの整備
- [ ] 年齢制限レーティングの適切な設定
- [ ] コンテンツの適切性確認
- [ ] 決済機能がある場合のIn-App Purchase実装
- [ ] 広告内容の適切性（該当する場合）

#### メタデータとアセット
- [ ] アプリアイコン（必要なすべてのサイズ）
- [ ] スクリーンショット（各デバイスサイズ対応）
- [ ] アプリ説明文（キーワード最適化）
- [ ] カテゴリとキーワードの選定
- [ ] 年齢レーティングの設定

### 4. TestFlightテストのベストプラクティス

#### テスト計画
1. **段階的ロールアウト**
   - 内部テスター → 限定外部テスター → 一般外部テスター
   - 各段階でのフィードバック収集と改善

2. **多様なテスト環境**
   - 異なるデバイスモデル
   - 各iOSバージョン
   - 様々なネットワーク環境
   - 異なる使用パターン

#### フィードバック収集
- TestFlightのクラッシュレポート分析
- テスターからの直接フィードバック
- アナリティクスデータの活用
- ユーザビリティテストの実施

### 5. よくある審査リジェクト理由と対策

#### 技術的問題
- **クラッシュ・フリーズ**
  - 徹底的な品質テスト
  - 各種例外処理の実装
  - メモリ管理の最適化

- **不完全な機能**
  - 全機能の動作確認
  - ダミーデータやテストモードの除去
  - ローディング状態の適切な表示

#### ガイドライン違反
- **プライバシー関連**
  - データ収集の透明性確保
  - ユーザー同意の適切な取得
  - プライバシーポリシーの整備

- **コンテンツ問題**
  - 不適切なコンテンツの除去
  - 年齢制限の適切な設定
  - コミュニティガイドライン遵守

### 6. 効率的なテストサイクル

#### 自動化の活用
```bash
# CI/CDでの自動テスト例
# GitHub Actionsやfastlane等を活用

# fastlane設定例
lane :beta do
  build_app(workspace: "YourApp.xcworkspace", 
            scheme: "YourApp")
  upload_to_testflight
  slack(message: "新しいベータ版をTestFlightにアップロードしました")
end
```

#### テスト効率化
- 自動テストスイートの整備
- 継続的インテグレーション
- 段階的デプロイメント
- A/Bテストフレームワークの活用

## 参考リンク
- [App Store Review Guidelines](https://developer.apple.com/app-store/review/guidelines/)
- [TestFlight Beta Testing](https://developer.apple.com/testflight/)
- [App Store Connect Help](https://developer.apple.com/help/app-store-connect/)

## Tags
#iOS #AppStore #TestFlight #QA #審査対策 #ベータテスト